{"version":3,"sources":["com/wsscode/pathom/book/core/join_env_update.cljs"],"mappings":";;;;AAIA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAgBC,AAAcC,AAAIC;AAAlC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAGwB,AAAA,AAAA,AAACC,AAAMF;;AAE/B,AAAA,AAAAF,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAK,AAAgBM,AAAwCR;AAAxD,AAAA,AAAAG,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAAI,AAAAJ,AAAA,AAAyCM;AAAzC,AAAA,AAAA,AAGaA;;AAEb,AAAA,AAAAZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAa,AAAgBE,AAAsCZ;AAAtD,AAAA,AAAAW,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAP,AAAA,AAAAO,AAAA,AAAA,AAAA,AAAA,AAAAN,AAAAC,AAAAK,AAAAA;AAAA,AAAAJ,AAAAI,AAAA,AAAuCF;AAAvC,AAAA,AAAA,AAGaA;;AAEb,AAAA,AAAKI,AACFf,AAAaU;AAEhB,AAAKM,AACH,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC,AACyCC,AACAC,AACAC,AACAC,AAG1B,AAAA,AAAA,AAACC,AAAiCP,AAClCQ,AACAC","names":["com.wsscode.pathom.connect/resolver","com.wsscode.pathom.book.core.join-env-update/env-modifier","env","input","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","p__53774","map__53775","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.book.core.join-env-update/env-read-thing","demo-env-key","p__53781","map__53782","com.wsscode.pathom.book.core.join-env-update/global-thing","com.wsscode.pathom.book.core.join-env-update/register","com.wsscode.pathom.book.core.join-env-update/parser","com.wsscode.pathom.core/parallel-parser","com.wsscode.pathom.core/map-reader","com.wsscode.pathom.connect/parallel-reader","com.wsscode.pathom.connect/open-ident-reader","com.wsscode.pathom.core/env-placeholder-reader","com.wsscode.pathom.connect.connect_plugin.cljs$core$IFn$_invoke$arity$1","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.core/trace-plugin"],"sourcesContent":["(ns com.wsscode.pathom.book.core.join-env-update\n  (:require [com.wsscode.pathom.core :as p]\n            [com.wsscode.pathom.connect :as pc]))\n\n(pc/defresolver env-modifier [env input]\n  {::pc/output [{:change-env [:val]}]}\n  {:change-env {:val    123\n                ::p/env (assoc env ::demo-env-key \"modified\")}})\n\n(pc/defresolver env-read-thing [{::keys [demo-env-key]} input]\n  {::pc/cache? false\n   ::pc/output [:env-data]}\n  {:env-data demo-env-key})\n\n(pc/defresolver global-thing [{::keys [demo-env-key]} input]\n  {::pc/cache? false\n   ::pc/output [:env-data]}\n  {:env-data demo-env-key})\n\n(def register\n  [env-modifier env-read-thing])\n\n(def parser\n  (p/parallel-parser\n    {::p/env     {::p/reader               [p/map-reader\n                                            pc/parallel-reader\n                                            pc/open-ident-reader\n                                            p/env-placeholder-reader]\n                  ::demo-env-key           \"original\"\n                  ::p/placeholder-prefixes #{\">\"}}\n     ::p/plugins [(pc/connect-plugin {::pc/register register})\n                  p/error-handler-plugin\n                  p/trace-plugin]}))\n"]}