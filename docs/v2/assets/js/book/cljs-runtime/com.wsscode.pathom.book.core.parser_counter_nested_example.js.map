{"version":3,"sources":["com/wsscode/pathom/book/core/parser_counter_nested_example.cljs"],"mappings":";;;;AAKA,AAAA,AAAAA,AAAMM;AAAN,AAAA,AAAAL,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAAA,AACsBO;AADtB,AAAAH,AAAAJ,AAAA,AACWM;AADX,AAEE,AAAIA;AACF,AAACE,AAAOD;;AADV;;;AAIF,AAAKE,AACH,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAC,AAACC,AAA+BN;AAAhC,AACiC,AAACO,AAAM,AAAA,AAAAF,AAAcG;;AAGxD,AAAA,AAAMC,AAAQP,AAAIQ;AAAlB,AACE,AAAAC,AAAA,AAAAC,AAAA;AAAA,AAAA,AAAAC,AAAA;;AAAA,AAAA,AAAAC,AAAA,AAAAC,AAAA;AAAAC;AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA;AAAA,AAAA,AAAA,AAAAC,AAAA;AAAA,AAAAC,AAAA,AAAA,AACsCmB;AADtClB,AAAA,AAAA,AAAAD,AACiBkB,AAAMlC;AADvBkB,AAAA,AAAAD,AAAAA,AACGf,AAAAA,AAAAA,AAA4CM,AAAAA;AAD/CM,AAAAA;AAAA,AAAA,AAAAK,AAAAL,AAAAI;;AAAA;;;;AAAA,AAAA;;;;AAAA,AAAA,AAAAE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAA,AAAAC;;AAAA,AAAAD,AAAA,AAAA;;AAAAA;;AAAAN;;AAAA,AAAA,AAAAQ,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAC,AAAA,AAAAV,AAAAC;AAAA,AAAA,AAAA,AAAAU,AAAAD,AAAA;AAAA;;AAAAA;;;;AAAA,AAAA,AAAAE,AAAAC;AAAA,AAAAC,AAAAF;AAAA,AAAA,AAAAG,AAAAd;AAAA,AAAA,AAAAc,AAAA,AAAAD;;AAAAC;AAAA,AAAAC,AAAAf;;AAAA;;AAAA,AAAA,AAAAW;;;;AAAA,AAAA,AAAA,AAAAD,AAAAF,AAAA;AAAA,AAAAR;;;;AAAAQ;;;;;AAAAR;;;;;AAAAA;;;;;;;;;;AAAAgB,AAAA,AAAAC,AAAA,AAAAnB,AAAAA,AAAAA;AAAA,AAAA,AAAAmB,AAAAC,AAAA,AAAAvB;;AAAAsB;;AAAA,AAAA,AAAAE,AAAAH;;;;AAAArB","names":["p__53195","map__53197","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.book.core.parser-counter-nested-example/join-walk-reader","query","env","com.wsscode.pathom.core.join.cljs$core$IFn$_invoke$arity$1","com.wsscode.pathom.book.core.parser-counter-nested-example/count-parser","p1__53203#","com.wsscode.pathom.core/parser","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","cljs.core/inc","com.wsscode.pathom.book.core.parser-counter-nested-example/parser","tx","c__38971__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__38972__auto__","switch__38924__auto__","state_53211","state_val_53212","inst_53207","inst_53208","inst_53209","cljs.core.async.impl.ioc-helpers/return-chan","statearr-53219","state-machine__38925__auto__","ret-value__38926__auto__","result__38927__auto__","cljs.core/keyword-identical?","e53220","js/Object","ex__38928__auto__","statearr-53225","cljs.core.async.impl.ioc-helpers/process-exception","state__38973__auto__","statearr-53262","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljs.core.atom.cljs$core$IFn$_invoke$arity$1"],"sourcesContent":["(ns com.wsscode.pathom.book.core.parser-counter-nested-example\n  (:require [com.wsscode.pathom.core :as p]\n            [cljs.core.async :refer [go]]))\n\n; tag::parser[]\n(defn join-walk-reader\n  [{:keys [query] :as env}]\n  (if query\n    (p/join env)\n    ::p/continue))\n\n(def count-parser\n  (p/parser {::p/env {::p/reader [join-walk-reader\n                                  #(swap! (::counter %) inc)]}}))\n; end::parser[]\n\n(defn parser [env tx]\n  (go\n    (count-parser (assoc env ::counter (atom 0)) tx)))\n"]}