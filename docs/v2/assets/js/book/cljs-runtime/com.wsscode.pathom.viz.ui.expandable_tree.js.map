{"version":3,"sources":["com/wsscode/pathom/viz/ui/expandable_tree.cljs"],"mappings":";;;;;;;AAOA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAc,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAC,AAAWC;AAAX,AAAA,AAAAD,AAAsBE;AAAtB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAsBA;AACpC,AAAAJ,AAAA,AAAA,AAAA,AAAA,AAAkB,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAI;AAAA,AAAA,AAAAA,AAAwBC;AAAxB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAwBA;AAC1C,AAAAN,AAAA,AAAA,AAAA,AAAA,AAAmBO;AACnB,AAAAP,AAAA,AAAA,AAAA,AAAA,AAAgB,AAAAQ,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAe,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAcC,AAAWR;AACxD,AAAAH,AAAA,AAAA,AAAA,AAAA,AAAaG;AACb,AAAAH,AAAA,AAAA,AAAA,AAAA,AAAkB,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAW;AAAA,AAAA,AAAAC,AAAAD;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAClB,AAAAZ,AAAA,AAAA,AAAA,AAAA,AAAc,AAAAc,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAC;AAAA,AAAA,AAAAJ,AAAAI;AAAA,AAAAA;AAAA,AAAA,AAAAJ,AAAAI;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AACd,AAAAf,AAAA,AAAA,AAAA,AAAA,AAAc,AAAAc,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAE;AAAA,AAAA,AAAAL,AAAAK;AAAA,AAAAA;AAAA,AAAA,AAAAC,AAAAD,AAAA;AAAA,AAAAA;AAAA,AAAA,AAAA,AAAAL,AAAAK,AAAA,AAAAC,AAAAD,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AACd,AAAAhB,AAAA,AAAA,AAAA,AAAA,AAAiBkB;AAEjB,AAAA,AAEA,AAAA,AAAA,AAAAC,AAAAC,AAAAC,AAAAC,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA;;;;AAAA,AAAUyC;AAAV,AAAA,AAAAxC,AAAA;AAAA,AAAA,AAAAC,AAAAD,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAAAA,AAAA,AAAAA;;AAAA,AAAA,AAAAA,AAAA;;;AAAAA;;;AAAA,AAAAE,AAAA,AAAAC,AAAAC,AAAUoC;;;AAAV,AAAAnC,AAAA,AAAUmC;;AAAV,AAAAlC,AAAA,AAAUkC;AAAV,AAAA,AAAA,AAAA,AAAAlC,AAAA;;AAAA,AAAA,AAAAC,AAAA;AAAA,AAAA,AAAAA,AACGkC;AADH,AAAA,AAAAjC,AAAAC;AAAAC,AAAAC;AAAAC,AAAAC;AAAAC,AAAAC;AAAAC,AAAAC;AAAAC,AAAA,AAAAC,AAAAZ;AAAAa,AAAA,AAAA,AAAAC,AAAAd,AAAA;AAAAe,AAAA,AAAAC,AAAAhB;AAAAiB,AAAA,AAAAC,AAAAlB;AAAAmB,AAAAnB;AAAA,AAAA,AAAAE,AAAAS;;AAAA,AAAAP,AAAAS;;AAAA,AAAAP,AAAAS;;AAAA,AAAAP,AAAAS;;AAAA,AAAAP,AAAAS;;AAAA,AAAA,AAAA,AAAAC,AAAA,AAAAC,AACGa;AADHd,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAE,AAAA,AAAAF,AAAA,AAAA,AAAA,AAAA,AAAAG,AAAAC,AAAAJ,AAAAA;AAAAA,AAE6EuB;AAF7E,AAAAlB,AAAAL,AAAA,AACiBe;AADjB,AAAAV,AAAAL,AAAA,AACqBgB;AADrB,AAAAX,AAAAL,AAAA,AAEiBiB;AAFjB,AAAAZ,AAAAL,AAAA,AAE0BkB;AAF1B,AAAAb,AAAAL,AAAA,AAEoCmB;AAFpC,AAAAd,AAAAL,AAAA,AAEyCoB;AAFzC,AAAAf,AAAAL,AAAA,AAEyDqB;AAFzD,AAAAhB,AAAAL,AAAA,AAEgEsB;AAFhE,AAgBE,AAAA,AAAA,AAACE,AAAc,AAACC,AAAOV,AACrB,AAAIA,AACF,AAAA,AAACS,AACC,AAAA,AAAA,AAAA,AAAA,AAACA;;AAAD,AAA+B,AAACJ,AAAAA,AAAAA,AAAgBD,AAAAA;;AAFpD,AAGM,AAAA,AAAIH,AAAS,AAAA,AAAA,AAAIE,AACnB,AAACG,AAAAA,AAAAA,AAAOE,AAAAA,AACZ,AAAI,AAAAG,AAAIR;AAAJ,AAAA,AAAAQ;AAAAA;;AAAc,AAACC,AAAIZ;;AACrB,AAAA,AAAA,AAAA,AAACS,AAAmB,AAAA,AAAA,AAAIT,AACtB,AAAAa,AAAA;AAAAC;AAAA,AAAA,AAAAC,AAAA,AAAA;;AAAA,AAAA,AAAAD,AAAAA;;AAAA,AAAA,AAAAE,AAAA,AAAAC,AAAAH;AAAA,AAAA,AAAAE;AAAA,AAAA,AAAAF,AAAAE;AAAA,AAAA,AAAA,AAAAE,AAAAJ;AAAA,AAAAK,AAw3E2C,AAAA8D,AAAAnE;AAx3E3CM,AAAA,AAAAC,AAAAF;AAAAG,AAAA,AAAAC,AAAAH;AAAA,AAAA,AAAA,AAAA,AAAAI,AAAA;;AAAA,AAAA,AAAA,AAAAA,AAAAJ;AAAA,AAAAK,AAAA,AAAAC,AAAAP,AAAAK;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAtC,AAAA,AAAAsC,AAAA,AAAA,AAAA,AAAA,AAAArC,AAAAC,AAAAoC,AAAAA;AAAAA,AAAuBjB;AAAvB,AAAAlB,AAAAmC,AAAA,AAAczB;AAAd,AAAA,AACYI,AAAK,AAACkC,AAAKlC,AAAKJ;AAD5B,AAAA,AAAA,AAAA2B,AAAAL,AAEE,AAAAiB,AACE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACG,AAAMlC,AAAYJ,AACIF,AACOG,AACTC,AACCC,AACE,AAAC1D,AAAUqD,AAASE;AAN9C,AAAA,AAAAmC,AAAAA,AAACE,AAAAA,AAAAA;;;AAFH,AAAA,AAAAjB,AAAA;;;;AAAA;;;;;AAAA,AAAAI,AAAA,AAAAC,AAAAP,AAAA,AAAAQ,AAAA,AAAAC,AAAAjB;;AAAA,AAAAc,AAAA,AAAAC,AAAAP,AAAA;;;AAAA,AAAAU,AAAA,AAAAC,AAAAnB;AAAAkB,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA7C,AAAA,AAAA6C,AAAA,AAAA,AAAA,AAAA,AAAA5C,AAAAC,AAAA2C,AAAAA;AAAAA,AAAuBxB;AAAvB,AAAAlB,AAAA0C,AAAA,AAAchC;AAAd,AAAA,AACYI,AAAK,AAACkC,AAAKlC,AAAKJ;AAD5B,AAAA,AAAAkC,AAEE,AAAAM,AACE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACE,AAAMlC,AAAYJ,AACIF,AACOG,AACTC,AACCC,AACE,AAAC1D,AAAUqD,AAASE;AAN9C,AAAA,AAAAoC,AAAAA,AAACC,AAAAA,AAAAA;AAFH,AAAAX,AAAA,AAAAK,AAAArB;;;AAAA;;;;;AAAA,AAAA;;;AAAA,AAAA,AAAAD,AAA6B,AAAAuB,AAASnC;AAAT,AAAA,AAAkBM;AAAQ,AAAA6B,AAACC,AAAkB9B;;AAA7C6B;;;AAFjC;AAtBJ,AAAA,AAAA7D,AAAAD;;AAAA,AAAAD,AAAAD;;AAAA,AAAAD,AAAAD;;AAAA,AAAAD,AAAAD;;AAAA,AAAAD,AAAAD;;;;AAAAF;AAAA,AAAA,AAAA,AAAUkC,AAAAA;;AAAV,AAAA,AAAA,AAAA,AAAA,AAAUA;;AAAV,AAAA,AAAA,AAAUA,AA6+G+B;;AA7+GzC,AAAAP,AAAUO;AAAV,AAAA,AAAA,AAAA,AAAAP,AAAAJ;;AAAA,AAAA,AAAAI,AAAA;AAAAC;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAD,AAo/FmC;AAAAC;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA;;;;AAp/FnCD;AAAA,AAAAE,AAAA,AAAUK;AAAV,AAAA,AAAA,AAAA,AAAAL,AAAAN;;AAAA,AAAA,AAAAM,AAAA;AAAAD;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAo/FmC;AAAAD;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA;;;;AAp/FnCC;AAAA,AAAA,AAAA,AAAUK;;AAAV,AAAA,AAAA,AAAUA;;AAAV,AAAA,AAAA,AAAAJ,AAAAC,AAAAC,AAAUE;AAAV,AAAA,AAAAD,AAAAF,AAAA;;AAkCA,AAAK8C,AAAU,AAAA,AAAA,AAAA,AAAAE,AAACC,AAAW9C;AAAZ,AAA8B,AAACY,AAAO,AAAA,AAAAiC;;AAErD,AAAA,AAAA,AAAA5F,AAAAC,AAAAC,AAAAC,AAAAC,AAAAC,AAAAyF;AAAA;AAAA,AAAA;;;;AAAA,AAAUwB;AAAV,AAAA,AAAA/G,AAAA;AAAA,AAAA,AAAAC,AAAAD,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAAAA,AAAA,AAAAA;;AAAA,AAAA,AAAAA,AAAA;;;AAAAA;;;AAAA,AAAAE,AAAA,AAAAC,AAAAC,AAAU2G;;;AAAV,AAAA1G,AAAA,AAAU0G;;AAAV,AAAAvB,AAAA,AAAUuB;AAAV,AAAA,AAAA,AAAA,AAAAvB,AAAA;;AAAA,AAAA,AAAAjF,AAAA;AAAA,AAAA,AAAAA,AACGkC;AADH,AAAA,AAAAgD,AAAAhF;AAAAiF,AAAA/E;AAAAgF,AAAA9E;AAAA+E,AAAA7E;AAAA8E,AAAA5E;AAAA6E,AAAA,AAAA3E,AAAAZ;AAAAwF,AAAA,AAAA,AAAA1E,AAAAd,AAAA;AAAAyF,AAAA,AAAAzE,AAAAhB;AAAA0F,AAAA,AAAAxE,AAAAlB;AAAA2F,AAAA3F;AAAA,AAAA,AAAAE,AAAAqF;;AAAA,AAAAnF,AAAAoF;;AAAA,AAAAlF,AAAAmF;;AAAA,AAAAjF,AAAAkF;;AAAA,AAAAhF,AAAAiF;;AAAA,AAAA,AAAA,AAAAC,AAAA,AAAAvE,AACGa;AADH0D,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAtE,AAAA,AAAAsE,AAAA,AAAA,AAAA,AAAA,AAAArE,AAAAC,AAAAoE,AAAAA;AAAA,AAAAnE,AAAAmE,AAAA,AAEYvD;AAFZwD,AAAA,AAAAC,AACG5D;AADH2D,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAvE,AAAA,AAAAuE,AAAA,AAAA,AAAA,AAAA,AAAAtE,AAAAC,AAAAqE,AAAAA;AAAA,AAAApE,AAAAoE,AAAA,AAGYpD;AAHZ,AAAAhB,AAAAoE,AAAA,AAGmBY;AAHnB,AAAAhF,AAAAoE,AAAA,AAGwBnD;AAHxB,AAeE,AAACE,AACC,AAAAoE,AACE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACnC,AAAM4B,AACgBpE,AACFI,AACCC,AACQ,AAAA,AAACuE,AAAa/E;AAL9C,AAAA,AAAA8E,AAAAA,AAACpC,AAAAA,AAAAA;;AAhBL,AAAA,AAAAlE,AAAA4E;;AAAA,AAAA9E,AAAA6E;;AAAA,AAAA/E,AAAA8E;;AAAA,AAAAhF,AAAA+E;;AAAA,AAAAjF,AAAAgF;;;;AAAA,AAAA,AAAAD,AAAA;;AAAA,AAAA,AAAA,AACG/C;AADH,AAAA,AAAA6D,AAAA,AAAA,AAAA,AAa4C;AAAKxD;AAAL,AACE,AAAA,AAACuE,AAAgB5E,AAAgB6E,AAAkBxE;;;AAdjG,AAAA,AAAAyD,AAAA,AAAA,AAAAD;AAAA,AAAAC;;;;AAAAf;AAAA,AAAA,AAAA,AAAUuB,AAAAA;;AAAV,AAAA,AAAA,AAAA,AAAA,AAAUA;;AAAV,AAAA,AAAA,AAAUA,AAy8G+B;;AAz8GzC,AAAAP,AAAUO;AAAV,AAAA,AAAA,AAAA,AAAAP,AAAA3E;;AAAA,AAAA,AAAA2E,AA08FmC;AAAAtE;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA;;;;AA18FnC,AAAA,AAAAsE,AAAA;AAAAtE;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAYoBM;;;;AAZpB,AAAA,AAAAgE,AAAA3E;;AAAA,AAAA,AAAA2E,AAAA;AAAAC,AACGhE;AADH,AAAA,AAAAiE,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA7E,AAAA,AAAA6E,AAAA,AAAA,AAAA,AAAA,AAAA5E,AAAAC,AAAA2E,AAAAA;AAAA,AAAA1E,AAAA0E,AAAA,AAIgCO;AAJhC,AAAAjF,AAAA0E,AAAA,AAImDQ;AAJnD,AAAA,AAAA,AACGzE;AADH,AAKqB,AAAA,AAAA,AAAA,AAAA,AAAC0E,AACa,AAACC,AAEbH,AACAC;;;;AATvB,AAAA,AAAAV,AAAA3E;;AAAA,AAAA,AAAA2E,AAAA;AAAA/D,AAAAkE;AAAA,AAAA,AAAAlE,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAAkE;;;;AAAA,AAAA,AAAAH,AAAA3E;;AAAA,AAAA,AAAA2E,AAAA;AACG/D;AADH,AAAA,AAAA,AACGA;AADH,AAAA,AAAA,AAAA;;;;AAAA+D;AAAA,AAAAI,AAAA,AAAUG;AAAV,AAAA,AAAA,AAAA,AAAAH,AAAA/E;;AAAA,AAAA,AAAA+E,AA08FmC;AAAA1E;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA;;;;AA18FnC,AAAA,AAAA0E,AAAA;AAAA1E;AAAA,AAAA,AAAAA,AAAA;AAAA,AAAA,AAYoBM;;;;AAZpB,AAAA,AAAAoE,AAAA/E;;AAAA,AAAA,AAAA+E,AAAA;AAAAC,AACGpE;AADH,AAAA,AAAAqE,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAjF,AAAA,AAAAiF,AAAA,AAAA,AAAA,AAAA,AAAAhF,AAAAC,AAAA+E,AAAAA;AAAA,AAAA9E,AAAA8E,AAAA,AAIgCG;AAJhC,AAAAjF,AAAA8E,AAAA,AAImDI;AAJnD,AAAA,AAAA,AACGzE;AADH,AAKqB,AAAA,AAAA,AAAA,AAAA,AAAC0E,AACa,AAACC,AAEbH,AACAC;;;;AATvB,AAAA,AAAAN,AAAA/E;;AAAA,AAAA,AAAA+E,AAAA;AAAAnE,AAAAkE;AAAA,AAAA,AAAAlE,AAAA;AAAA,AAAA,AAAA,AAAA,AAAA,AAAAkE;;;;AAAA,AAAA,AAAAC,AAAA/E;;AAAA,AAAA,AAAA+E,AAAA;AACGnE;AADH,AAAA,AAAA,AACGA;AADH,AAAA,AAAA,AAAA;;;;AAAAmE;AAAA,AAAA,AAAA,AAAUG;;AAAV,AAAA,AAAA,AAAUA;;AAAV,AAAA,AAAA,AAAA3E,AAAAC,AAAAC,AAAUyE;AAAV,AAAA,AAAAxE,AAAAF,AAAA;;AAuBA,AAAKoF,AAAgB,AAACC,AAAoBX","names":["cljs.spec.alpha/def-impl","cljs.spec.alpha.every_impl","G__54566","cljs.core/any?","cljs.core/vector?","G__54572","cljs.core/set?","cljs.core/boolean?","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl","cljs.spec.alpha/cat-impl","cljs.core/map?","G__54576","cljs.core/coll?","cljs.spec.alpha/map-spec-impl","G__54578","G__54609","cljs.core/contains?","cljs.core/fn?","js/com","js/com.wsscode","js/com.wsscode.pathom","js/com.wsscode.pathom.viz","js/com.wsscode.pathom.viz.ui","js/com.wsscode.pathom.viz.ui.expandable-tree","js/com.wsscode.pathom.viz.ui.expandable-tree.TreeItem","this__53741__auto__","js/React.Component","goog.object/extend","js/React.Component.prototype","fulcro.client.primitives/default-component-prototype","fulcro.client.primitives/-register-component!","x54650","this__52659__auto__","*reconciler*-orig-val__54653","fulcro.client.primitives/*reconciler*","*depth*-orig-val__54654","fulcro.client.primitives/*depth*","*shared*-orig-val__54655","fulcro.client.primitives/*shared*","*instrument*-orig-val__54656","fulcro.client.primitives/*instrument*","*parent*-orig-val__54657","fulcro.client.primitives/*parent*","*reconciler*-temp-val__54658","fulcro.client.primitives/get-reconciler","*depth*-temp-val__54659","fulcro.client.primitives/depth","*shared*-temp-val__54660","fulcro.client.primitives.shared","*instrument*-temp-val__54661","fulcro.client.primitives/instrument","*parent*-temp-val__54662","map__54667","fulcro.client.primitives/props","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","x54721","_","x54723","this__53744__auto__","writer__53745__auto__","opt__53746__auto__","cljs.core/-write","com.wsscode.pathom.viz.ui.expandable-tree/TreeItem","this","key","children","expanded","expanded?","path","toggle-expanded","render","sort-by","node","fulcro.client.localized_dom.div","cljs.core.pr_str","or__4131__auto__","cljs.core/not","iter__4523__auto__","s__54681","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","cljs.core/count","b__54685","cljs.core/chunk-buffer","i__54684","map__54706","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__54680","cljs.core/chunk-rest","map__54712","cljs.core/first","cljs.core/cons","cljs.core/rest","G__54720","cljs.core.sort_by","cljs.core.conj","G__54708","G__54719","com.wsscode.pathom.viz.ui.expandable-tree/tree-item","cljs.core.assoc","p1__54725#","fulcro.client.primitives.factory","js/com.wsscode.pathom.viz.ui.expandable-tree.ExpandableTree","x54751","*reconciler*-orig-val__54754","*depth*-orig-val__54755","*shared*-orig-val__54756","*instrument*-orig-val__54757","*parent*-orig-val__54758","*reconciler*-temp-val__54759","*depth*-temp-val__54760","*shared*-temp-val__54761","*instrument*-temp-val__54762","*parent*-temp-val__54763","map__54771","map__54773","fulcro.client.primitives.get_computed","ret__52634__auto__","obj54785","x54786","p__54794","map__54795","props","x54812","p__54823","map__54824","com.wsscode.pathom.viz.ui.expandable-tree/ExpandableTree","root","current-normalized","data-tree","cljs.core.merge","cljs.core/random-uuid","com.wsscode.pathom.viz.helpers.update_value_BANG_","com.wsscode.pathom.viz.helpers/toggle-set-item","G__54778","fulcro.client.primitives.get_state","com.wsscode.pathom.viz.ui.expandable-tree/expandable-tree","fulcro.client.primitives.computed_factory","cljs.core/chunk-first"],"sourcesContent":["(ns com.wsscode.pathom.viz.ui.expandable-tree\n  (:require [cljs.spec.alpha :as s]\n            [com.wsscode.pathom.viz.helpers :as h]\n            [fulcro.client.localized-dom :as dom]\n            [fulcro.client.primitives :as fp]\n            [com.fulcrologic.guardrails.core :refer [>def >defn >fdef => | <- ?]]))\n\n(s/def ::path (s/coll-of any? :kind vector?))\n(s/def ::expanded (s/coll-of ::path :kind set?))\n(s/def ::expanded? boolean?)\n(s/def ::render (s/fspec :args (s/cat :props map?) :ret any?))\n(s/def ::key any?)\n(s/def ::children (s/coll-of ::node))\n(s/def ::node (s/keys :opt-un [::key ::children]))\n(s/def ::root (s/keys :req-un [::children]))\n(s/def ::sort-by fn?)\n\n(declare tree-item)\n\n(fp/defsc TreeItem\n  [this {:keys  [key children]\n         ::keys [expanded expanded? path toggle-expanded render sort-by] :as node}]\n  {:css [[:.item {:display     \"flex\"\n                  :align-items \"center\"\n                  :padding     \"0 2px\"}]\n         [:.expander {:display      \"flex\"\n                      :align-items  \"center\"\n                      :color        \"#656565\"\n                      :cursor       \"pointer\"\n                      :font-size    \"10px\"\n                      :margin-top   \"1px\"\n                      :margin-right \"3px\"\n                      :width        \"10px\"\n                      :flex-shrink  \"0\"}]\n         [:.children-container {:margin-left \"13px\"}]]}\n  (dom/div {:key (pr-str key)}\n    (if key\n      (dom/div :.item\n        (dom/div :.expander {:onClick #(toggle-expanded path)}\n          (if children (if expanded? \"\u25bc\" \"\u25b6\")))\n        (render node)))\n    (if (or expanded? (not key))\n      (dom/div {:classes [(if key :.children-container)]}\n        (for [{:keys [key] :as node} (cond->> children sort-by (cljs.core/sort-by sort-by))\n              :let [path (conj path key)]]\n          (tree-item\n            (assoc node ::path path\n                        ::expanded expanded\n                        ::toggle-expanded toggle-expanded\n                        ::render render\n                        ::sort-by sort-by\n                        ::expanded? (contains? expanded path))))))))\n\n(def tree-item (fp/factory TreeItem {:keyfn #(pr-str (:key %))}))\n\n(fp/defsc ExpandableTree\n  [this\n   {::keys [expanded]}\n   {::keys [render root sort-by]}]\n  {:pre-merge      (fn [{:keys [current-normalized data-tree]}]\n                     (merge\n                       {:ui/id     (random-uuid)\n                        ::expanded #{}}\n                       current-normalized\n                       data-tree))\n   :ident          [:ui/id :ui/id]\n   :query          [:ui/id ::expanded]\n   :css-include    [TreeItem]\n   :initLocalState (fn [] {:toggle-expanded (fn [path]\n                                              (h/update-value! this ::expanded h/toggle-set-item path))})}\n  (dom/div\n    (tree-item\n      (assoc root ::path []\n                  ::expanded expanded\n                  ::render render\n                  ::sort-by sort-by\n                  ::toggle-expanded (fp/get-state this :toggle-expanded)))))\n\n(def expandable-tree (fp/computed-factory ExpandableTree))\n"]}