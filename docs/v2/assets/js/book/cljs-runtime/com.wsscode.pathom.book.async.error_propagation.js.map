{"version":3,"sources":["com/wsscode/pathom/book/async/error_propagation.cljs"],"mappings":"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","names":["com.wsscode.pathom.book.async.error-propagation/sleep","n","c","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","js/setTimeout","cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.book.async.error-propagation/reader","_","c__39084__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__39085__auto__","switch__38786__auto__","state_49026","state_val_49027","statearr-49028","inst_49023","cljs.core.async.impl.ioc-helpers/return-chan","inst_49004","statearr-49031","cljs.core.async.impl.ioc-helpers/process-exception","cljs.core.async.impl.ioc-helpers/add-exception-frame","inst_49016","inst_49017","inst_49018","cljs.core.async.impl.ioc-helpers/take!","inst_49020","inst_49021","com.wsscode.common.async-cljs/throw-err","statearr-49037","statearr-49038","statearr-49042","state-machine__38787__auto__","ret-value__38788__auto__","result__38789__auto__","cljs.core/keyword-identical?","e49044","js/Object","ex__38790__auto__","statearr-49045","state__39086__auto__","statearr-49047","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core/rand-int","state_49068","state_val_49069","statearr-49072","inst_49066","inst_49049","statearr-49074","inst_49053","inst_49054","inst_49055","inst_49060","inst_49061","inst_49062","cljs.core/PersistentHashMap","inst_49063","inst_49064","statearr-49075","statearr-49076","statearr-49077","e49078","statearr-49079","statearr-49082","cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.book.async.error-propagation/parser","com.wsscode.pathom.core/async-parser","com.wsscode.pathom.core/env-plugin","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.profile/profile-plugin"],"sourcesContent":["(ns com.wsscode.pathom.book.async.error-propagation\n  (:require [cljs.core.async :as async]\n            [com.wsscode.common.async-cljs :refer [go-catch <?]]\n            [com.wsscode.pathom.core :as p]\n            [com.wsscode.pathom.profile :as pp]))\n\n(defn sleep [n]\n  (let [c (async/chan)]\n    (js/setTimeout #(async/put! c ::done) n)\n    c))\n\n(def reader\n  {:async-info\n   (fn [_]\n     (go-catch\n       (<? (sleep (+ 100 (rand-int 1000))))\n       \"From async\"))\n\n   :async-error\n   (fn [_]\n     ; go catch will catch any exception and return then as the channel value\n     (go-catch\n       ; <? macro will re-throw any exception that get read from the channel\n       (<? (sleep (+ 100 (rand-int 1000))))\n       (throw (ex-info \"Error!!\" {}))))\n\n   :foo\n   (fn [_]\n     \"Regular\")})\n\n(def parser\n  (p/async-parser {::p/plugins [(p/env-plugin {::p/reader reader})\n                                p/error-handler-plugin\n                                pp/profile-plugin]}))\n"]}