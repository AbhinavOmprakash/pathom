{"version":3,"sources":["com/wsscode/pathom/viz/codemirror.cljs"],"mappings":"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","names":["cljs.spec.alpha/def-impl","cljs.spec.alpha/or-spec-impl","cljs.core/string?","cljs.core/map?","cljs.core/pos-int?","cljs.core/boolean?","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl","cljs.core/any?","cljs.spec.alpha/cat-impl","cljs.spec.alpha/map-spec-impl","G__61882","G__61891","cljs.core/contains?","cljs.spec.alpha.every_impl","cljs.spec.alpha.tuple_impl","G__61928","i__13227__auto__","v__13228__auto__","cljs.core.nth","cljs.core/fn?","var_args","args__4736__auto__","len__4730__auto__","i__4731__auto__","argseq__4737__auto__","cljs.core/IndexedSeq","com.wsscode.pathom.viz.codemirror/prop-call","seq61935","G__61936","cljs.core/first","cljs.core/next","G__61937","self__4717__auto__","comp","name","args","temp__5720__auto__","f","G__61941","fulcro.client.primitives/props","cljs.core.apply","com.wsscode.pathom.viz.codemirror/html-props","props","cljs.core.remove","p__61951","vec__61953","k","_","cljs.core/namespace","cljs.core.into","cljs.core/clj->js","com.wsscode.pathom.viz.codemirror/pathom-cache","cljs.core.atom","js/com","js/com.wsscode","js/com.wsscode.pathom","js/com.wsscode.pathom.viz","js/com.wsscode.pathom.viz.codemirror","js/com.wsscode.pathom.viz.codemirror.Editor","this__51967__auto__","js/React.Component","goog.object/extend","js/React.Component.prototype","fulcro.client.primitives/default-component-prototype","fulcro.client.primitives/-register-component!","x61981","this__50869__auto__","reconciler__50870__auto__","fulcro.client.primitives/get-reconciler","lifecycle__50871__auto__","cljs.core.get_in","indexer__50872__auto__","goog.object/set","fulcro.client.impl.protocols/index-component!","next-props__50856__auto__","this__50855__auto__","map__62017","goog.object/get","cljs.core/PROTOCOL_SENTINEL","cljs.core/hash-map","cljs.core.get","this__50873__auto__","reconciler__50874__auto__","lifecycle__50875__auto__","cfg__50876__auto__","st__50877__auto__","indexer__50878__auto__","and__4120__auto__","cljs.core/deref","cljs.core.swap_BANG_","cljs.core/update-in","cljs.core/dissoc","fulcro.client.impl.protocols/drop-component!","this__50885__auto__","*reconciler*-orig-val__62062","fulcro.client.primitives/*reconciler*","*depth*-orig-val__62063","fulcro.client.primitives/*depth*","*shared*-orig-val__62064","fulcro.client.primitives/*shared*","*instrument*-orig-val__62065","fulcro.client.primitives/*instrument*","*parent*-orig-val__62066","fulcro.client.primitives/*parent*","*reconciler*-temp-val__62067","*depth*-temp-val__62068","fulcro.client.primitives/depth","*shared*-temp-val__62069","fulcro.client.primitives.shared","*instrument*-temp-val__62070","fulcro.client.primitives/instrument","*parent*-temp-val__62071","x62156","x62158","this__51970__auto__","writer__51971__auto__","opt__51972__auto__","cljs.core/-write","com.wsscode.pathom.viz.codemirror/Editor","this","textarea","options","or__4131__auto__","process","codemirror","js/CodeMirror.fromTextArea","cljs.core/reset!","e61997","p1__61961#","cljs.core.not_EQ_","js/clearTimeout","js/setTimeout","com.wsscode.pathom.viz.codemirror.prop_call","e","js/console.warn","value","force-index-update?","indexes","cm","cur-index","goog.object/getValueByKeys","cljs.core.partial","com.wsscode.pathom.viz.codemirror/autocomplete","cljs.core/not","cur-value","temp__5718__auto__","fulcro.client.dom.macro_create_element","fulcro.util/force-children","cljs.core.dissoc","p1__61968#","js/React.createElement","com.wsscode.pathom.viz.codemirror/editor","fulcro.client.primitives.factory","com.wsscode.pathom.viz.codemirror/escape-re","input","re","js/RegExp","com.wsscode.pathom.viz.codemirror/fuzzy-re","cljs.core.reduce","s","c","com.wsscode.pathom.viz.codemirror/str->keyword","cljs.core.keyword","cljs.core.subs","p__62191","map__62192","com.wsscode.pathom.viz.codemirror/token-context","index-io","token","state","mode","path-stack","find-ctx","com$wsscode$pathom$viz$codemirror$token_context_$_find_ctx","ctx","key","cljs.core._EQ_","cljs.core.conj","prev","obj62271","obj62279","com.wsscode.pathom.viz.codemirror/completions","index","reg","G__62294","cljs.core/Keyword","com.wsscode.pathom.connect/discover-attrs","cljs.core.assoc","cljs.core.comp","p1__62283#","cljs.core.map","cljs.core/PersistentHashMap","js/window","com.wsscode.pathom.viz.codemirror/cm-completions","cur","ch","com.wsscode.pathom.viz.codemirror/fuzzy-match","blank?","cljs.core.mapv","cljs.core/str","p1__62309#","com.wsscode.fuzzy/fuzzy-match","line","fexpr__62327","start","js/CodeMirror","cljs.core/count","end","words","cljs.core.sort","com.wsscode.pathom.viz.codemirror/def-cm-command","com.wsscode.pathom.viz.codemirror/key-has-children?","completions","cljs.core/seq","com.wsscode.pathom.viz.codemirror/str-repeat","n","clojure.string.join","cljs.core.repeat","indent","vec__62362","cursor-end","joined","p__62383","map__62384","com.wsscode.pathom.viz.codemirror/pathom","G__62391","js/CodeMirror.showHint","js/module$node_modules$parinfer_codemirror$parinfer_codemirror.init","p1__62378#","cljs.core.update","cljs.core.merge","com.wsscode.pathom.viz.codemirror/clojure","G__62420","p1__62412#"],"sourcesContent":["(ns com.wsscode.pathom.viz.codemirror\n  (:require [cljs.reader :refer [read-string]]\n            [com.wsscode.fuzzy :as fuzzy]\n            [cljs.spec.alpha :as s]\n            [clojure.string :as str]\n            [cljsjs.codemirror]\n            [com.wsscode.pathom.connect :as pc]\n            [fulcro.client.dom :as dom]\n            [fulcro.client.primitives :as fp]\n            [goog.object :as gobj]\n\n            [\"codemirror/mode/clojure/clojure\"]\n            [\"codemirror/addon/edit/matchbrackets\"]\n            [\"codemirror/addon/edit/closebrackets\"]\n            [\"codemirror/addon/fold/foldcode\"]\n            [\"codemirror/addon/fold/foldgutter\"]\n            [\"codemirror/addon/fold/brace-fold\"]\n            [\"codemirror/addon/fold/indent-fold\"]\n            [\"codemirror/addon/selection/active-line\"]\n            [\"codemirror/addon/search/match-highlighter\"]\n            [\"codemirror/addon/search/search\"]\n            [\"codemirror/addon/search/searchcursor\"]\n            [\"codemirror/addon/hint/anyword-hint\"]\n            [\"codemirror/addon/hint/show-hint\"]\n            [\"codemirror/addon/display/placeholder\"]\n            [\"parinfer-codemirror\" :as parinfer-cm]\n            [\"./pathom-mode\"]))\n\n(s/def ::mode (s/or :string string? :obj map?))\n(s/def ::theme string?)\n(s/def ::indentUnit pos-int?)\n(s/def ::smartIndent boolean?)\n(s/def ::lineNumbers boolean?)\n(s/def ::readOnly boolean?)\n\n(s/def ::value string?)\n(s/def ::onChange (s/fspec :args (s/cat :code string?)))\n\n(s/def ::options (s/keys :opt [::mode\n                               ::theme\n                               ::indentUnit\n                               ::smartIndent\n                               ::lineNumbers]))\n\n(s/def ::props (s/keys :req-un [::value]\n                 :opt [::options]))\n\n(s/def ::extraKeys\n  (s/map-of string? (s/or :str string? :fn fn?)))\n\n(defn prop-call [comp name & args]\n  (when-let [f (-> comp fp/props name)]\n    (apply f args)))\n\n(defn html-props [props]\n  (->> props\n       (remove (fn [[k _]] (namespace k)))\n       (into {})\n       (clj->js)))\n\n(def pathom-cache (atom {}))\n\n(declare autocomplete)\n\n(fp/defui ^:once Editor\n  Object\n  (componentDidMount [this]\n    (let [textarea   (gobj/get this \"textNode\")\n          options    (-> this fp/props ::options (or {}) clj->js)\n          process    (-> this fp/props ::process)\n          codemirror (js/CodeMirror.fromTextArea textarea options)]\n      (reset! pathom-cache {})\n\n      (try\n        (.on codemirror \"change\" #(when (not= (gobj/get % \"origin\") \"setValue\")\n                                    (js/clearTimeout (gobj/get this \"editorHold\"))\n                                    (gobj/set this \"editorHold\"\n                                      (js/setTimeout\n                                        (fn []\n                                          (gobj/set this \"editorHold\" false))\n                                        300))\n                                    (prop-call this :onChange (.getValue %))))\n        (.setValue codemirror (-> this fp/props :value))\n        (if process (process codemirror))\n        (catch :default e (js/console.warn \"Error setting up CodeMirror\" e)))\n      (gobj/set this \"codemirror\" codemirror)))\n\n  (componentWillReceiveProps [this {:keys     [value force-index-update?]\n                                    ::pc/keys [indexes]}]\n    (let [cm        (gobj/get this \"codemirror\")\n          cur-index (gobj/getValueByKeys cm #js [\"options\" \"pathomIndex\"])]\n      (when (and cur-index (or force-index-update? (not= indexes @cur-index)))\n        (reset! pathom-cache {})\n        (reset! cur-index indexes)\n        (gobj/set (gobj/getValueByKeys cm #js [\"options\" \"hintOptions\"]) \"hint\" (partial autocomplete indexes)))\n\n      ; there is a race condition that happens when user types something, react updates state and try to update\n      ; the state back to the editor, which moves the cursor in the editor in weird ways. the workaround is to\n      ; stop accepting external values after a short period after user key strokes.\n      (if-not (gobj/get this \"editorHold\")\n        (let [cur-value (.getValue cm)]\n          (if (and cm value (not= value cur-value))\n            (.setValue cm value))))))\n\n  (componentWillUnmount [this]\n    (if-let [cm (gobj/get this \"codemirror\")]\n      (.toTextArea cm)))\n\n  (render [this]\n    (let [props (fp/props this)]\n      (dom/div (-> props (dissoc :value :onChange :force-index-update?) (html-props))\n        (js/React.createElement \"textarea\"\n          #js {:ref          #(gobj/set this \"textNode\" %)\n               :defaultValue (:value props)})))))\n\n(def editor (fp/factory Editor))\n\n(defn escape-re [input]\n  (let [re (js/RegExp. \"([.*+?^=!:${}()|[\\\\]\\\\/\\\\\\\\])\" \"g\")]\n    (-> input str (.replace re \"\\\\$1\"))))\n\n(defn fuzzy-re [input]\n  (-> (reduce (fn [s c] (str s (escape-re c) \".*\")) \"\" input)\n      (js/RegExp \"i\")))\n\n(defn str->keyword [s] (keyword (subs s 1)))\n\n(defn token-context [{::pc/keys [index-io] :as indexes} token]\n  (let [state      (gobj/get token \"state\")\n        mode       (gobj/get state \"mode\")\n        path-stack (gobj/get state \"pathStack\")\n\n        find-ctx   (fn find-ctx\n                     ([s] (find-ctx s []))\n                     ([s ctx]\n                      (let [mode (gobj/get s \"mode\")\n                            key  (gobj/get s \"key\")]\n                        (cond\n                          ; ident join: [{[:ident x] [|]}]\n                          (and (= \"join\" mode)\n                               (= \"ident\" (gobj/getValueByKeys s \"key\" \"mode\")))\n                          (let [key (str->keyword (gobj/getValueByKeys s \"key\" \"key\"))]\n                            {:type :attribute :context (conj ctx key)})\n\n                          ; join: [{:child [|]}]\n                          (and (= \"join\" mode)\n                               (= (string? key)))\n                          (let [key (str->keyword key)]\n                            (if (contains? (get index-io #{}) key)\n                              {:type :attribute :context (conj ctx key)}\n                              (recur (gobj/getValueByKeys s \"prev\" \"prev\") (conj ctx key))))\n\n                          :else\n                          {:type :attribute :context ctx}))))]\n\n    (cond\n      (and (= \"ident\" mode)\n           (or (nil? (gobj/get path-stack \"key\"))\n               (= (gobj/get token \"string\") (gobj/get path-stack \"key\"))))\n      {:type :ident}\n\n      (and (= \"join\" mode)\n           (or (= (gobj/get token \"string\") (gobj/get path-stack \"key\"))\n               (nil? (gobj/get path-stack \"key\"))))\n      (find-ctx (if (= \"param-exp\" (gobj/getValueByKeys path-stack \"prev\" \"mode\"))\n                  (gobj/getValueByKeys path-stack \"prev\" \"prev\" \"prev\")\n                  (gobj/getValueByKeys path-stack \"prev\" \"prev\")))\n\n      (= \"attr-list\" mode)\n      (if (gobj/getValueByKeys path-stack \"prev\" \"mode\")\n        (find-ctx (gobj/get path-stack \"prev\"))\n        ; no stack, empty context\n        {:type :attribute :context []})\n\n      (= \"param-exp\" mode)\n      (let [prev (gobj/getValueByKeys path-stack \"prev\")]\n        (recur indexes (js-obj \"state\" (js-obj \"mode\" (gobj/get prev \"mode\") \"pathStack\" prev)))))))\n\n(defn ^:export completions [index token reg]\n  (let [ctx (token-context index token)]\n    (when reg\n      (case (:type ctx)\n        :attribute (->> (pc/discover-attrs (assoc index ::pc/cache pathom-cache)\n                          (->> ctx :context (remove (comp #{\">\"} namespace)))))\n        :ident (into {} (map #(hash-map % {})) (-> index ::pc/idents))\n        {}))))\n\n(gobj/set js/window \"cljsDeref\" deref)\n\n(defn cm-completions [index cm]\n  (let [cur   (.getCursor cm)\n        ch    (.-ch cur)\n        token (.getTokenAt cm cur)\n        reg   (subs (.-string token) 0 (- ch (.-start token)))]\n    (completions index token reg)))\n\n(defn fuzzy-match [blank? reg options]\n  (if blank?\n    (mapv str options)\n    (->> options\n         (map (comp #(hash-map ::fuzzy/string %) str))\n         (hash-map ::blank? blank?\n                   ::fuzzy/search-input reg\n                   ::fuzzy/options)\n         (fuzzy/fuzzy-match)\n         (map ::fuzzy/string))))\n\n(defn autocomplete [index cm options]\n  (let [cur    (.getCursor cm)\n        line   (.-line cur)\n        ch     (.-ch cur)\n        token  (.getTokenAt cm cur)\n        reg    (subs (.-string token) 0 (- ch (.-start token)))\n        blank? (#{\"[\" \"{\" \" \" \"(\"} reg)\n        start  (if blank? cur (-> js/CodeMirror (.Pos line (- ch (count reg)))))\n        end    (if blank? cur (-> js/CodeMirror (.Pos line (gobj/get token \"end\"))))\n        words  (->> (cm-completions index cm) (mapv first))]\n\n    (if words\n      #js {:list (->> words\n                      (remove (get index ::pc/autocomplete-ignore #{}))\n                      (fuzzy-match blank? reg)\n                      sort\n                      clj->js)\n           :from start\n           :to   end})))\n\n(defn def-cm-command [name f]\n  (gobj/set (gobj/get js/CodeMirror \"commands\") name f))\n\n(defn ^:export key-has-children? [completions token]\n  (let [reg (str->keyword (gobj/get token \"string\"))]\n    (and (= \"atom\" (gobj/get token \"type\"))\n         (or (seq (get completions reg))\n             (= \">\" (namespace reg))))))\n\n(defn str-repeat [s n]\n  (str/join (repeat n s)))\n\n(def-cm-command \"pathomJoin\"\n  (fn [cm]\n    (let [cur    (.getCursor cm)\n          token  (.getTokenAt cm cur)\n          indent (or (gobj/getValueByKeys token #js [\"state\" \"pathStack\" \"indent\"])\n                     0)]\n\n      (if (and (= \"attr-list\" (gobj/getValueByKeys token #js [\"state\" \"mode\"]))\n               (= \"atom-composite\" (gobj/get token \"type\")))\n        (let [line  (.-line cur)\n              start (.Pos js/CodeMirror line (gobj/get token \"start\"))\n              end   (.Pos js/CodeMirror line (gobj/get token \"end\"))\n              s     (gobj/get token \"string\")\n\n              [cursor-end joined]\n              (if (= (.-ch start) indent)\n                [(.Pos js/CodeMirror (inc line) (+ 2 indent))\n                 (str \"{\" s \"\\n\" (str-repeat \" \" (inc indent)) \"[]}\")]\n\n                [(.Pos js/CodeMirror line (+ (gobj/get token \"start\")\n                                            (count s)\n                                            3))\n                 (str \"{\" s \" []}\")])]\n          (.replaceRange cm joined start end)\n          (.setCursor cm cursor-end)\n          (.showHint cm))))))\n\n(defn pathom [{::pc/keys [indexes] :as props}]\n  (let [options {::lineNumbers               true\n                 ::mode                      \"pathom\"\n                 ::matchBrackets             true\n                 ::autoCloseBrackets         true\n                 ::highlightSelectionMatches true\n                 ::foldGutter                true\n                 ::hintOptions               {:hint           (partial autocomplete indexes)\n                                              :completeSingle false}\n                 ::extraKeys                 {\"Ctrl-Space\" \"autocomplete\"\n                                              \"Cmd-J\"      \"pathomJoin\"}\n                 ::gutters                   [\"CodeMirror-linenumbers\" \"CodeMirror-foldgutter\"]\n                 :pathomIndex                (atom indexes)}]\n    (editor (-> props\n                (assoc ::process (fn [cm]\n                                   (.on cm \"keyup\" (fn [cm e] (when (and (not (gobj/getValueByKeys cm #js [\"state\" \"completionActive\"]))\n                                                                         (= 1 (-> (gobj/get e \"key\") (count))))\n                                                                (js/CodeMirror.showHint cm))))\n                                   (parinfer-cm/init cm \"smart\" #js {:forceBalance true})))\n                (update ::options #(merge options %))))))\n\n(defn clojure [props]\n  (let [options {::lineNumbers               true\n                 ::mode                      \"clojure\"\n                 ::matchBrackets             true\n                 ::highlightSelectionMatches true\n                 ::foldGutter                true\n                 ::gutters                   [\"CodeMirror-linenumbers\" \"CodeMirror-foldgutter\"]}]\n    (editor (-> props\n                (update ::options #(merge options %))))))\n"]}