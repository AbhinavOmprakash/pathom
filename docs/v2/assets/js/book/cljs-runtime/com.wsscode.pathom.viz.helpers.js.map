{"version":3,"sources":["com/wsscode/pathom/viz/helpers.cljs"],"mappings":"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","names":["cljs.spec.alpha/def-impl","cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4","G__47257","cljs.core/keyword?","cljs.core/vector?","cljs.spec.alpha.tuple_impl.cljs$core$IFn$_invoke$arity$2","G__47258","cljs.core/map?","i__12838__auto__","v__12839__auto__","cljs.core.nth.cljs$core$IFn$_invoke$arity$2","cljs.spec.alpha/map-spec-impl","G__47260","G__47265","cljs.core/coll?","com.wsscode.pathom.viz.helpers/pd","f","e","com.wsscode.pathom.viz.helpers/target-value","goog.object/getValueByKeys","com.wsscode.pathom.viz.helpers/stringify-keyword-values","x","clojure.walk/prewalk","cljs.core/simple-keyword?","cljs.core/name","cljs.core.keyword.cljs$core$IFn$_invoke$arity$1","com.wsscode.pathom.viz.helpers/pprint-str","sb__4661__auto__","goog.string/StringBuffer","*print-newline*-orig-val__47268","cljs.core/*print-newline*","*print-fn*-orig-val__47269","cljs.core/*print-fn*","*print-newline*-temp-val__47270","*print-fn*-temp-val__47271","x__4662__auto__","cljs.pprint.pprint.cljs$core$IFn$_invoke$arity$1","p__47278","map__47279","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","cljs.core.get.cljs$core$IFn$_invoke$arity$3","com.wsscode.pathom.viz.helpers/drag-resize","this","attribute","default","axis","props","child","js/React.createElement","js/module$node_modules$react_draggable$dist$react_draggable.DraggableCore","dd","G__47284","G__47285","G__47286","goog.object/set","goog.object/get","G__47288","G__47289","G__47290","or__4131__auto__","fulcro.client.primitives.get_state.cljs$core$IFn$_invoke$arity$2","start","size","value","new-size","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","fulcro.client.primitives.set_state_BANG_.cljs$core$IFn$_invoke$arity$2","fulcro.client.dom.macro_create_element.cljs$core$IFn$_invoke$arity$3","fulcro.util/force-children","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","com.wsscode.pathom.viz.helpers/pprint","*print-newline*-orig-val__47293","*print-fn*-orig-val__47294","*print-newline*-temp-val__47295","*print-fn*-temp-val__47296","com.wsscode.pathom.viz.helpers/map-vals","m","cljs.core.into.cljs$core$IFn$_invoke$arity$3","p__47297","vec__47298","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","k","v","com.wsscode.pathom.viz.helpers/index-by","coll","cljs.core/persistent!","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","ret","cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3","cljs.core/transient","fulcro.client.mutations/mutate","fulcro-incoming-env","_","p__47302","map__47303","map__47305","key","fn","args","state","ref","p1__47301#","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic","cljs.core/update-in","cljs.core/update","cljs.core.apply.cljs$core$IFn$_invoke$arity$3","var_args","args__4736__auto__","len__4730__auto__","i__4731__auto__","argseq__4737__auto__","cljs.core/IndexedSeq","com.wsscode.pathom.viz.helpers/update-value!","seq47307","G__47308","cljs.core/first","cljs.core/next","G__47309","G__47310","self__4717__auto__","component","cljs.core.sequence.cljs$core$IFn$_invoke$arity$1","cljs.core/seq","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core/List","cljs.core/array-map","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic","fulcro.client.primitives.transact_BANG_.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.viz.helpers/toggle-set-item","set","item","cljs.core/contains?","cljs.core.disj.cljs$core$IFn$_invoke$arity$2","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","p__47346","p__47347","vec__47348","seq__47349","first__47350","vec__47351","seq__47352","first__47353","com.wsscode.pathom.viz.helpers/vector-compare","value1","rest1","value2","rest2","result","cljs.core/compare","com.wsscode.pathom.viz.helpers/remove-not-found","com.wsscode.pathom.core/transduce-maps","cljs.core.remove.cljs$core$IFn$_invoke$arity$1","p__47356","vec__47357","com.wsscode.pathom.viz.helpers/path-map->tree","path-map","map__47362","items","p__47363","map__47366","index","path","cljs.core/count","prev","cljs.core.subvec.cljs$core$IFn$_invoke$arity$3","cljs.core.update_in.cljs$core$IFn$_invoke$arity$4","cljs.core.fnil.cljs$core$IFn$_invoke$arity$2","cljs.core/conj","cljs.core/keys","p1__47361#","p2__47360#","cljs.core.sort.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns com.wsscode.pathom.viz.helpers\n  (:require [\"react-draggable\" :refer [DraggableCore]]\n            [ghostwheel.core :as g :refer [>defn >defn- >fdef => | <- ?]]\n            [clojure.pprint]\n            [fulcro.client.dom :as dom]\n            [fulcro.client.primitives :as fp]\n            [fulcro.client.mutations :as fm]\n            [goog.object :as gobj]\n            [clojure.walk :as walk]\n            [cljs.spec.alpha :as s]\n            [com.wsscode.pathom.core :as p]))\n\n(s/def ::path (s/coll-of keyword? :kind vector?))\n(s/def ::path-map (s/map-of ::path map?))\n(s/def ::node (s/keys :opt-un [::children]))\n(s/def ::children (s/coll-of ::node))\n\n(defn pd [f]\n  (fn [e]\n    (.preventDefault e)\n    (f e)))\n\n(defn target-value [e] (gobj/getValueByKeys e \"target\" \"value\"))\n\n(defn stringify-keyword-values [x]\n  (walk/prewalk\n    (fn [x]\n      (cond\n        (simple-keyword? x)\n        (name x)\n\n        (keyword x)\n        (str x)\n\n        :else\n        x))\n    x))\n\n(defn pprint-str [x]\n  (with-out-str\n    (clojure.pprint/pprint x)))\n\n(defn drag-resize [this {:keys [attribute default axis props] :or {axis \"y\"}} child]\n  (js/React.createElement DraggableCore\n    #js {:key     \"dragHandler\"\n         :onStart (fn [e dd]\n                    (gobj/set this \"start\" (gobj/get dd axis))\n                    (gobj/set this \"startSize\" (or (fp/get-state this attribute) default)))\n         :onDrag  (fn [e dd]\n                    (let [start    (gobj/get this \"start\")\n                          size     (gobj/get this \"startSize\")\n                          value    (gobj/get dd axis)\n                          new-size (+ size (if (= \"x\" axis) (- value start) (- start value)))]\n                      (fp/set-state! this {attribute new-size})))}\n    (dom/div (merge {:style {:pointerEvents \"all\"\n                             :cursor        (if (= \"x\" axis) \"ew-resize\" \"ns-resize\")}}\n               props)\n      child)))\n\n(defn pprint [x]\n  (with-out-str (cljs.pprint/pprint x)))\n\n(defn map-vals [f m]\n  (into {} (fn [[k v]] [k (f v)]) m))\n\n(defn index-by [f coll]\n  (persistent!\n    (reduce\n      (fn [ret x]\n        (let [k (f x)]\n          (assoc! ret k x)))\n      (transient {}) coll)))\n\n(fm/defmutation update-value [{:keys [key fn args]}]\n  (action [{:keys [state ref]}]\n    (swap! state update-in ref update key #(apply fn % args))))\n\n(defn update-value!\n  \"Helper to call transaction to update some key from current component.\"\n  [component key fn & args]\n  (fp/transact! component [`(update-value {:key ~key :fn ~fn :args ~args})]))\n\n(defn toggle-set-item [set item]\n  (if (contains? set item)\n    (disj set item)\n    (conj set item)))\n\n(defn vector-compare [[value1 & rest1] [value2 & rest2]]\n  (let [result (compare value1 value2)]\n    (cond\n      (not (zero? result)) result\n      (nil? value1) 0\n      :else (recur rest1 rest2))))\n\n(defn remove-not-found [x]\n  (p/transduce-maps\n    (remove (fn [[_ v]] (contains? #{::p/not-found ::fp/not-found} v)))\n    x))\n\n(>defn path-map->tree\n  \"Generate a tree structure from a map of maps to data. For example, the given structure:\n\n  {[:a] {:any data}\n   [:a :b] {:more data}\n   [:c] {:key foo}}\n\n   It will return:\n\n   {:children [{:any data\n                :children [{:more data}]}\n               {:key foo}]}\"\n  [path-map]\n  [::path-map => ::node]\n  (let [{:keys [items]}\n        (reduce\n          (fn [{:keys [items index]} path]\n            (if (> (count path) 1)\n              (let [prev (subvec path 0 (dec (count path)))]\n                {:items items\n                 :index (update-in index [prev :children] (fnil conj [])\n                          (get index path))})\n              {:items (conj items (get index path))\n               :index index}))\n          {:items []\n           :index path-map}\n          (->> path-map\n               (keys)\n               (sort #(vector-compare %2 %))))]\n    {:children items}))\n"]}