{"version":3,"sources":["com/wsscode/pathom/book/tracing/demo.cljs"],"mappings":"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","names":["com.wsscode.pathom.connect/resolver","com.wsscode.pathom.book.tracing.demo/slow-root","env","_","c__38971__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__38972__auto__","switch__38924__auto__","state_53311","state_val_53312","inst_53299","inst_53300","inst_53301","inst_53302","cljs.core/PersistentHashMap","statearr-53326","statearr-53328","cljs.core.async.impl.ioc-helpers/process-exception","statearr-53329","cljs.core.async.impl.ioc-helpers/add-exception-frame","inst_53270","cljs.core.get.cljs$core$IFn$_invoke$arity$2","statearr-53331","statearr-53332","inst_53294","cljs.core.async.impl.ioc-helpers/take!","inst_53266","statearr-53336","inst_53305","cljs.core.async.impl.ioc-helpers/return-chan","inst_53296","inst_53297","com.wsscode.common.async-cljs/throw-err","statearr-53338","inst_53273","inst_53275","inst_53276","inst_53277","inst_53278","inst_53279","inst_53281","com.wsscode.pathom.trace.trace_enter.cljs$core$IFn$_invoke$arity$2","inst_53282","statearr-53342","inst_53284","inst_53285","inst_53286","inst_53287","inst_53288","inst_53289","inst_53290","inst_53291","inst_53292","com.wsscode.pathom.trace.trace_leave.cljs$core$IFn$_invoke$arity$3","statearr-53345","statearr-53346","statearr-53348","state-machine__38925__auto__","ret-value__38926__auto__","result__38927__auto__","cljs.core/keyword-identical?","e53349","js/Object","ex__38928__auto__","statearr-53350","state__38973__auto__","statearr-53362","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core.async/timeout","com.wsscode.pathom.book.tracing.demo/slow-root-dep","state_53410","state_val_53411","inst_53403","inst_53404","inst_53405","inst_53406","statearr-53428","statearr-53429","statearr-53430","inst_53376","statearr-53432","statearr-53433","inst_53391","inst_53372","statearr-53435","inst_53408","inst_53393","inst_53394","statearr-53439","inst_53378","inst_53379","inst_53380","inst_53381","inst_53382","statearr-53444","inst_53384","inst_53385","inst_53386","inst_53387","inst_53388","inst_53389","statearr-53449","statearr-53454","statearr-53461","e53473","statearr-53478","statearr-53492","com.wsscode.pathom.book.tracing.demo/error-root-dep","state_53539","state_val_53541","inst_53532","inst_53533","inst_53534","inst_53535","statearr-53554","statearr-53556","statearr-53560","inst_53502","statearr-53561","statearr-53562","inst_53527","inst_53497","statearr-53564","inst_53537","inst_53529","inst_53530","statearr-53565","inst_53506","inst_53507","inst_53508","inst_53509","inst_53510","inst_53511","inst_53512","inst_53513","statearr-53568","inst_53515","inst_53516","inst_53518","inst_53519","inst_53521","inst_53522","inst_53523","inst_53524","inst_53525","statearr-53574","statearr-53575","statearr-53578","e53582","statearr-53583","statearr-53588","cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2","com.wsscode.pathom.book.tracing.demo/app-registry","com.wsscode.pathom.trace/trace-tree-collect","x","row","com.wsscode.pathom.trace/tree-assoc-detail","com.wsscode.pathom.book.tracing.demo/parser","com.wsscode.pathom.core/parallel-parser","com.wsscode.pathom.core/map-reader","com.wsscode.pathom.connect/parallel-reader","com.wsscode.pathom.connect/open-ident-reader","com.wsscode.pathom.core/env-placeholder-reader","com.wsscode.pathom.connect/mutate-async","com.wsscode.pathom.connect.connect_plugin.cljs$core$IFn$_invoke$arity$1","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.core/trace-plugin","G__53600","G__53601"],"sourcesContent":["(ns com.wsscode.pathom.book.tracing.demo\n  (:require [com.wsscode.pathom.core :as p]\n            [com.wsscode.pathom.connect :as pc]\n            [com.wsscode.pathom.trace :as pt]\n            [clojure.core.async :as async]\n            [com.wsscode.common.async-cljs :refer [go-catch <?]]))\n\n(pc/defresolver slow-root [env _]\n  {::pc/output [::slow-root]}\n  (go-catch\n    ; here we use the tracing macro to compute the time for the timeout\n    (pt/tracing env {::pt/event ::my-event\n                     ::pt/style {:fill \"rgba(255, 255, 0, 0.5)\"}}\n      (<? (async/timeout 200)))\n    {::slow-root \"foo\"}))\n\n(pc/defresolver slow-root-dep [env _]\n  {::pc/input #{::slow-root}\n   ::pc/output [::root-dep]}\n  (go-catch\n    (pt/tracing env {::pt/event ::my-event}\n      (<? (async/timeout 200)))\n    {::root-dep \"nah\"}))\n\n(pc/defresolver error-root-dep [env _]\n  {::pc/input #{::slow-root}\n   ::pc/output [::root-dep-err]}\n  (go-catch\n    (pt/tracing env {::pt/event ::my-event\n                     ::pt/style {:fill \"rgba(255, 0, 0, 0.5)\"}\n                     ::data     \"Error message\"}\n      (<? (async/timeout 200)))\n    (throw (ex-info \"Meh\" {}))))\n\n(def app-registry [slow-root slow-root-dep error-root-dep])\n\n; to display the tracing with the results you must register the event type\n(defmethod pt/trace-tree-collect ::my-event [x row]\n  (-> row\n      ; the sequence at the end is a list with the keys to display in the trace when\n      ; user mouses over the event\n      (pt/tree-assoc-detail x [::data])))\n\n(def parser\n  (p/parallel-parser\n    {::p/env     {::p/reader               [p/map-reader\n                                            pc/parallel-reader\n                                            pc/open-ident-reader\n                                            p/env-placeholder-reader]\n                  ::p/placeholder-prefixes #{\">\"}}\n     ::p/mutate  pc/mutate-async\n     ::p/plugins [(pc/connect-plugin {::pc/register app-registry})\n                  p/error-handler-plugin\n                  p/trace-plugin]}))\n\n; to get raw tracing results, include the :com.wsscode.pathom/trace key in your query\n(parser {} [:a :b\n            :com.wsscode.pathom/trace])\n\n;=>\n;{:com.wsscode.pathom/trace\n; {:start 0,\n;  :path [],\n;  :duration 5049,\n;  :details [{:event \"process-pending\",\n;             :duration 0,\n;             :start 1,\n;             :provides #{:com.wsscode.pathom/trace},\n;             :merge-result? false}\n;            {:event \"flush-watchers-loop\", :duration 0, :start 1}\n;            {:event \"reset-loop\",\n;             :duration 0,\n;             :start 1,\n;             :loop-keys [:com.wsscode.pathom/trace]}\n; ...\n\n\n"]}