{"version":3,"sources":["com/wsscode/pathom/book/tracing/demo_parallel_reader.cljs"],"mappings":"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","names":["com.wsscode.pathom.connect/resolver","G__93912","p__93916","map__93917","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","com.wsscode.pathom.book.tracing.demo-parallel-reader/movie-details","env","id","c__47946__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__47947__auto__","switch__47663__auto__","state_93936","state_val_93937","statearr-93940","inst_93934","cljs.core.async.impl.ioc-helpers/return-chan","inst_93921","statearr-93943","cljs.core.async.impl.ioc-helpers/process-exception","_","cljs.core.async.impl.ioc-helpers/add-exception-frame","inst_93925","cljs.core.async.impl.ioc-helpers/take!","inst_93928","inst_93929","com.wsscode.common.async-cljs/throw-err","inst_93930","inst_93931","inst_93932","cljs.core/PersistentHashMap","statearr-93948","statearr-93949","statearr-93951","state-machine__47664__auto__","ret-value__47665__auto__","result__47666__auto__","cljs.core/keyword-identical?","e93952","js/Object","ex__47667__auto__","statearr-93953","state__47948__auto__","statearr-93958","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core.async/timeout","G__93960","com.wsscode.pathom.book.tracing.demo-parallel-reader/movie-rating","input","state_93980","state_val_93981","statearr-93983","inst_93977","inst_93964","statearr-93991","inst_93968","inst_93971","inst_93972","inst_93973","inst_93974","inst_93975","statearr-94020","statearr-94022","statearr-94023","e94025","statearr-94028","statearr-94034","G__94036","p__94037","map__94038","com.wsscode.pathom.book.tracing.demo-parallel-reader/movie-title-prefixed","title","state_94058","state_val_94061","statearr-94065","inst_94053","inst_94040","statearr-94071","inst_94044","inst_94046","inst_94047","inst_94048","inst_94049","inst_94050","inst_94051","statearr-94075","statearr-94076","statearr-94117","e94122","statearr-94123","statearr-94126","com.wsscode.pathom.book.tracing.demo-parallel-reader/app-registry","com.wsscode.pathom.book.tracing.demo-parallel-reader/parser","com.wsscode.pathom.core/parallel-parser","com.wsscode.pathom.core/map-reader","com.wsscode.pathom.connect/parallel-reader","com.wsscode.pathom.connect/open-ident-reader","com.wsscode.pathom.core/env-placeholder-reader","com.wsscode.pathom.connect/mutate-async","com.wsscode.pathom.connect.connect_plugin","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.core/trace-plugin"],"sourcesContent":["(ns com.wsscode.pathom.book.tracing.demo-parallel-reader\n  (:require [clojure.core.async :as async]\n            [com.wsscode.common.async-cljs :refer [go-catch <?]]\n            [com.wsscode.pathom.connect :as pc]\n            [com.wsscode.pathom.core :as p]))\n\n(pc/defresolver movie-details [env {:movie/keys [id]}]\n  {::pc/input  #{:movie/id}\n   ::pc/output [:movie/id :movie/title :movie/release-date]}\n  (go-catch\n    (<? (async/timeout 100))\n    {:movie/id           id\n     :movie/title        \"Title\"\n     :movie/release-date #inst \"2018-10-30\"}))\n\n(pc/defresolver movie-rating [env input]\n  {::pc/input  #{:movie/id}\n   ::pc/output [:movie/rating]}\n  (go-catch\n    (<? (async/timeout 100))\n    {:movie/rating \"PG\"}))\n\n(pc/defresolver movie-title-prefixed [env {:movie/keys [title]}]\n  {::pc/input  #{:movie/title}\n   ::pc/output [:movie/title-prefixed]}\n  (go-catch\n    (<? (async/timeout 100))\n    {:movie/title-prefixed (str \"Prefix \" title)}))\n\n(def app-registry [movie-details movie-rating movie-title-prefixed])\n\n(def parser\n  (p/parallel-parser\n    {::p/env     {::p/reader               [p/map-reader\n                                            pc/parallel-reader\n                                            pc/open-ident-reader\n                                            p/env-placeholder-reader]\n                  ::p/placeholder-prefixes #{\">\"}}\n     ::p/mutate  pc/mutate-async\n     ::p/plugins [(pc/connect-plugin {::pc/register app-registry})\n                  p/error-handler-plugin\n                  p/trace-plugin]}))\n"]}