{
"version":3,
"file":"module$com$wsscode$pathom$viz$d3_trace.js",
"lineCount":290,
"mappings":"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",
"sources":["com/wsscode/pathom/viz/d3-trace.js"],
"sourcesContent":["import * as d3 from \"/node_modules/d3/dist/d3.node.js\";\n\nd3.select('body').selectAll('.pathom-tooltip').remove()\n\nconst tooltipElement = d3.select('body').append(\"div\").attr(\"class\", 'pathom-tooltip')\n\nfunction registerTooltip(nodes, labelF) {\n  nodes\n    .on('mouseover.tooltip', function(d) { tooltipElement.style('visibility', 'visible') })\n    .on('mousemove.tooltip', function(d) {\n      let x = d3.event.clientX + 15, y = d3.event.clientY;\n      const x1 = x + tooltipElement.node().offsetWidth + 10;\n      const screenWidth = document.body.offsetWidth;\n\n      if (x1 > screenWidth) x = screenWidth - (x1 - x);\n\n      tooltipElement\n        .html(labelF(d, this))\n        .style('left', x + 'px')\n        .style('top', y + 'px')\n    })\n    .on('mouseout.tooltip', () => tooltipElement.style('visibility', 'hidden'))\n}\n\nfunction renderRule(element, settings) {\n  const {svgHeight} = settings\n  const vruler = element\n    .append('line')\n    .attr('class', 'pathom-vruler')\n    .attr('y1', 0)\n    .attr('y2', svgHeight)\n\n  element\n    .on('mousemove.pathom-rule', function () {\n      const x = d3.mouse(this)[0];\n      vruler.attr('x1', x).attr('x2', x);\n    })\n\n  d3.select('body')\n    .on('keydown.pathom-rule', e => {\n      if (d3.event.keyCode === 16) vruler.style('visibility', 'visible')\n    })\n    .on('keyup.pathom-rule', e => {\n      if (d3.event.keyCode === 16) vruler.style('visibility', 'hidden')\n    })\n\n  settings.vruler = vruler\n}\n\nfunction layoutTrace (node, {xScale, yScale, barSize}) {\n  node.x0 = xScale(0)\n  node.y0 = yScale(0);\n  node.x1 = xScale(node.data.duration);\n  node.y1 = node.y0 + 3;\n\n  const positionNode = function (node, pos) {\n    node.x0 = xScale(node.data.start);\n    node.x1 = xScale(node.data.start + node.data.duration);\n    node.y0 = pos.y;\n    node.y1 = pos.y += barSize;\n    pos.y++;\n\n    const nextPos = {y: pos.y};\n\n    if (node.data.children) {\n      if (node.children) {\n        node.children.forEach(n => positionNode(n, nextPos));\n      }\n\n      node.y2 = nextPos.y - 2;\n    }\n\n    pos.y = nextPos.y;\n\n    return node;\n  };\n\n  const pos = {y: node.y1 + 1};\n  node.children.forEach(n => positionNode(n, pos));\n\n  return node;\n}\n\nfunction applyDataStyles(selection) {\n  selection.each(function ({style}) {\n    if (!style) return\n\n    const sel = d3.select(this)\n\n    for (let name in style) {\n      sel.style(name, style[name])\n    }\n  })\n\n  return selection\n}\n\nfunction eventsOnMouse({xScale}, d, target) {\n  const xv = xScale.invert(d3.mouse(target)[0]);\n\n  return d.data.details.filter(detail => {\n    if (xv < detail.rts) return false;\n    if (xv > (detail.rts + (detail.duration || xScale.invert(1)))) return false;\n\n    return true;\n  })\n}\n\nfunction renderTrace(selection, settings) {\n  const {data, transitionDuration, xScale, showDetails, svgHeight} = settings\n\n  const nodeRoots = selection\n    .selectAll('g.pathom-attr-group')\n    .data(layoutTrace(data, settings).descendants(), d => {\n      return JSON.stringify(d.data.path)\n    })\n\n  const nodesEnter = nodeRoots\n    .enter().append('g')\n\n  const nodes = nodesEnter\n    .attr('class', 'pathom-attr-group')\n    .attr('transform', function (d) {\n      return 'translate(' + [d.x0, d.y0] + ')'\n    })\n    .style('opacity', 0)\n    .on('mouseover', function (d, i) {\n      d3.select(this.childNodes[0]).style('visibility', 'visible');\n    })\n    .on('mouseout', function (d, i) {\n      d3.select(this.childNodes[0]).style('visibility', 'hidden');\n    })\n    .on('click', function (d) {\n      const details = d3.event.altKey ? eventsOnMouse(settings, d, this) : d.data.details\n\n      showDetails(details.map(x => {\n        const d = Object.assign({}, x)\n\n        delete d.x0\n        delete d.x1\n        delete d.y0\n        delete d.y1\n\n        return d\n      }));\n    })\n\n  nodes\n    .style('opacity', 0)\n    .merge(nodeRoots)\n    .transition().duration(transitionDuration)\n    .attr('transform', function (d) {\n      return 'translate(' + [d.x0, d.y0] + ')'\n    })\n    .style('opacity', 1)\n\n  nodeRoots\n    .exit()\n    .transition().duration(transitionDuration)\n    .style('opacity', 0)\n    .remove()\n\n  registerTooltip(nodes, (d, target) => {\n    const label = d.data.name || d.data.hint;\n    const details = eventsOnMouse(settings, d, target)\n    const detailsTimes = details.map(d => {\n      return (d.duration ? d.duration + ' ms ' : '') + '<strong>' + d.event + '</strong>' + (d.label ? ' ' + d.label : '')\n    })\n\n    const detailsCount = ' <span class=\"pathom-details-count\">' + d.data.details.length + '</span>'\n    const childCount = d.data.children ? ' <span class=\"pathom-children-count\">' + d.data.children.length + '</span>' : '';\n\n    return [d.data.duration + ' ms <strong>' + label + '</strong>' + detailsCount + childCount].concat(detailsTimes).join(\"<br>\");\n  });\n\n  const boundNodes = nodesEnter.append('rect')\n    .attr('class', 'pathom-attribute-bounds')\n    .attr('width', d => d.x1 - d.x0 + 1)\n    .merge(nodeRoots.select('rect.pathom-attribute-bounds'))\n    .transition().duration(transitionDuration)\n    .attr('width', d => d.x1 - d.x0 + 1)\n    .attr('height', d => d.y2 ? d.y2 - d.y0 + 1 : 0)\n\n  const toggleChildrenNodes = nodesEnter.append('text')\n    .attr('class', 'pathom-attribute-toggle-children')\n    .style('visibility', d => d.children || d._children ? '' : 'hidden')\n    .on('click', function (d, e) {\n      d3.event.stopPropagation();\n\n      if (d.children && d.children.length && d.data.name) {\n        d._children = d.children;\n        d.children = null;\n        renderTrace(selection, settings);\n      } else if (d._children) {\n        d.children = d._children;\n        renderTrace(selection, settings);\n      }\n    })\n    .merge(nodeRoots.select('.pathom-attribute-toggle-children'))\n    .text((d, i) => {\n      if (i === 0) return ''\n\n      return d.children ? '-' : '+'\n    })\n\n  const attributeNodes = nodesEnter.append('rect')\n    .attr('class', 'pathom-attribute')\n    .attr('width', d => d.x1 - d.x0)\n    .attr('height', d => d.y1 - d.y0)\n    .merge(nodeRoots.select('rect.pathom-attribute'))\n    .transition().duration(transitionDuration)\n    .attr('width', d => d.x1 - d.x0)\n\n  const detailsNodesRoots = nodesEnter.append('g')\n    .attr('class', 'pathom-details-container')\n    .merge(nodeRoots.select('g.pathom-details-container'))\n    .selectAll('rect.pathom-detail-marker')\n    .data(d => {\n      d.data.details.forEach((dt, i) => {\n        dt.x0 = d.x0, dt.x1 = d.x1, dt.y0 = d.y0, dt.y1 = d.y1\n        dt.rts = dt.start - d.data.start\n        dt.id = i\n      })\n      return d.data.details\n    }, dt => {\n      return dt.id\n    })\n\n  const detailsNodesEnter = detailsNodesRoots.enter().append('rect')\n\n  const allDetails = detailsNodesEnter\n    .attr('class', d => 'pathom-detail-marker ' + 'pathom-event-' + d.event + (d.error ? ' pathom-event-error' : ''))\n    .attr('width', d => Math.max(1, xScale(d.duration)))\n    .attr('height', function (d) {\n      return d.y1 - d.y0;\n    })\n    .attr('transform', function (d) {\n      return 'translate(' + [xScale(d.rts), 0] + ')'\n    })\n    .call(applyDataStyles)\n    .merge(detailsNodesRoots)\n\n  allDetails\n    .transition().duration(transitionDuration)\n    .attr('width', d => Math.max(1, xScale(d.duration)))\n    .attr('height', function (d) {\n      return d.y1 - d.y0;\n    })\n    .attr('transform', function (d) {\n      return 'translate(' + [xScale(d.rts), 0] + ')'\n    })\n\n  // labels\n  nodesEnter\n    .append('text')\n    .attr('class', 'pathom-label-text')\n    .attr('dx', 2)\n    .attr('dy', 13)\n    .text(function (d) {\n      if (d.data.name) return d.data.name;\n    })\n}\n\nconst traceDefaults = {\n  barSize: 17,\n  showDetails: x => x\n}\n\nfunction initTrace(element, settings) {\n  const svg = d3.select(element)\n\n  return Object.assign({}, traceDefaults, settings, {svg, element})\n}\n\nfunction updateScale({axisNodes, axisX}) {\n  axisNodes.call(axisX)\n\n  axisNodes\n    .select(\".domain\")\n    .remove()\n\n  axisNodes\n    .selectAll(\"text\")\n    .attr(\"y\", 0)\n    .attr(\"x\", -5)\n    .style(\"text-anchor\", \"end\")\n}\n\nexport function renderPathomTrace(element, settingsSource) {\n  const settings = initTrace(element, settingsSource)\n  const {svg, svgWidth, svgHeight, data} = settings\n\n  svg\n    .attr('width', svgWidth)\n    .attr('height', svgHeight)\n\n  const xScale = d3.scaleLinear().domain([0, data.duration * 1.05]).range([0, svgWidth]);\n\n  const yScale = function(y) {\n    return y + 15;\n  }\n\n  settings.xScale = xScale\n  settings.yScale = yScale\n  settings.transitionDuration = 300\n\n  function applyZoom() {\n    const new_xScale = d3.event.transform.rescaleX(xScale);\n\n    settings.axisX.scale(new_xScale)\n\n    updateScale(settings)\n    mainGroup.attr(\"transform\", d3.event.transform);\n  }\n\n  const zoom = d3.zoom().on(\"zoom\", applyZoom)\n\n  svg.call(zoom);\n\n  settings.axisX = d3.axisBottom(xScale)\n    .tickFormat(d => d + \" ms\")\n    .tickSize(svgHeight)\n    .ticks(10);\n\n  settings.axisNodes = svg.append(\"g\")\n    .attr(\"class\", \"pathom-axis\")\n    .attr(\"transform\", \"translate(0,0)\")\n\n  updateScale(settings)\n\n  const mainGroup = svg.append('g')\n  mainGroup.append('g').attr('class', 'pathom-view-nodes-container')\n\n  const dataTree = d3.hierarchy(data, d => d.children)\n  dataTree.sum(d => d.name ? 1 : 0);\n\n  dataTree.each(d => {\n    if (d.children && d.children.length > 20) {\n      d._children = d.children;\n      d.children = null;\n\n      d._children.forEach(dd => {\n        dd._children = dd.children;\n        dd.children = null;\n      })\n    }\n  })\n\n  settings.data = dataTree\n\n  renderTrace(svg.select('.pathom-view-nodes-container'), settings)\n  renderRule(svg, settings)\n\n  return settings;\n}\n\nexport function updateTraceSize(settings) {\n  const {svg, svgWidth, svgHeight} = settings\n\n  settings.xScale.range([0, svgWidth])\n  settings.axisX.tickSize(svgHeight)\n\n  updateScale(settings)\n  renderTrace(svg.select('.pathom-view-nodes-container'), settings)\n\n  settings.vruler.attr('y2', svgHeight)\n\n  svg\n    .attr('width', svgWidth)\n    .attr('height', svgHeight)\n}\n"],
"names":["d3","select","selectAll","remove","tooltipElement","append","attr","registerTooltip","nodes","labelF","on","d","style","x","event","clientX","y","clientY","x1","node","offsetWidth","screenWidth","document","body","html","renderRule","element","settings","svgHeight","vruler","mouse","e","keyCode","layoutTrace","xScale","yScale","barSize","x0","y0","data","duration","y1","positionNode","pos","start","nextPos","children","forEach","n","y2","applyDataStyles","selection","each","sel","name","eventsOnMouse","target","xv","invert","details","filter","detail","rts","renderTrace","transitionDuration","showDetails","nodeRoots","descendants","JSON","stringify","path","nodesEnter","enter","i","childNodes","altKey","map","Object","assign","merge","transition","exit","label","hint","detailsTimes","detailsCount","length","childCount","concat","join","boundNodes","toggleChildrenNodes","_children","stopPropagation","text","attributeNodes","detailsNodesRoots","dt","id","detailsNodesEnter","allDetails","error","Math","max","call","traceDefaults","initTrace","svg","updateScale","axisNodes","axisX","renderPathomTrace","settingsSource","applyZoom","new_xScale","transform","rescaleX","scale","mainGroup","svgWidth","scaleLinear","domain","range","zoom","axisBottom","tickFormat","tickSize","ticks","dataTree","hierarchy","sum","dd","updateTraceSize","exports"]
}
