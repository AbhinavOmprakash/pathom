shadow$provide.module$com$wsscode$pathom$viz$pathom_mode=function(global,require,module,exports){(function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("module$node_modules$codemirror$lib$codemirror")):"function"==typeof define&&define.amd?define(["codemirror"],mod):mod(CodeMirror)})(function(CodeMirror){CodeMirror.defineMode("pathom",function(options){function pushStack(state,stack){stack.prev=state.pathStack;state.pathStack=stack;state.mode=stack.mode}function popStack(state){state.pathStack=
state.pathStack.prev;state.mode=state.pathStack.mode}function readNumber(ch,stream){if("0"===ch&&stream.eat(/x/i))return stream.eatWhile(tests.hex),!0;"+"!=ch&&"-"!=ch||!tests.digit.test(stream.peek())||(stream.eat(tests.sign),ch=stream.next());return tests.digit.test(ch)?(stream.eat(ch),stream.eatWhile(tests.digit),"."==stream.peek()?(stream.eat("."),stream.eatWhile(tests.digit)):"/"==stream.peek()&&(stream.eat("/"),stream.eatWhile(tests.digit)),stream.eat(tests.exponent)&&(stream.eat(tests.sign),
stream.eatWhile(tests.digit)),!0):!1}function readSymbol(stream){stream.eatWhile(tests.symbol);return"atom"}function readJoin(stream,state){pushStack(state,{mode:"join",indent:nextIndent(stream)});return"bracket"}function readIdent(stream,state){pushStack(state,{mode:"ident",indent:nextIndent(stream)});return"bracket"}function readParamExp(stream,state){pushStack(state,{mode:"param-exp",indent:nextIndent(stream)});return"bracket"}function nextIndent(stream){return stream.column()+stream.current().length}
function atomOrComp(stream,state){if(!options.pathomIndex)return"atom";var string=stream.current();stream=stream.column();state={state:state,string:string,type:"atom",start:stream,end:stream+string.length};string=pathomCM.completions(cljsDeref(options.pathomIndex),state,state.string);return pathomCM.key_has_children_QMARK_(string,state)?"atom-composite":"atom"}var tests={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[;\)\]]/,symbol:/[\w*+!\-\._?:<>\/\xa1-\uffff]/,
block_indent:/^(?:def|with)[^\/]+$|\/(?:def|with)/},pathomCM=com.wsscode.pathom.viz.codemirror;return{startState:function(){return{pathStack:{},indentation:0,mode:null}},token:function(stream,state){var ch,stack=state.pathStack;null==stack&&stream.sol()&&(state.indentation=stream.indentation());if("string"!=state.mode&&stream.eatSpace())return null;switch(state.mode){case "string":for(stack=!1;null!=(ch=stream.next());){if('"'==ch&&!stack){popStack(state);break}stack=!stack&&"\\"==ch}return"string";
case "attr-list":ch=stream.next();if(":"==ch)return readSymbol(stream),atomOrComp(stream,state);if("*"==ch)return"atom";if("["==ch)return readIdent(stream,state);if("]"==ch)return popStack(state),"bracket";if("{"==ch)return readJoin(stream,state);if("("==ch)return readParamExp(stream,state);break;case "join":ch=stream.next();if(!stack.key){if(":"==ch)return readSymbol(stream),stack.key=stream.current(),atomOrComp(stream,state);if("["==ch)return readIdent(stream,state);if("("==ch)return readParamExp(stream,
state)}else if("["==ch)return pushStack(state,{mode:"attr-list",indent:nextIndent(stream)}),"bracket";if("}"==ch)return popStack(state),"param-exp"==stack.prev.mode&&(stack.prev.key=stack),"bracket";break;case "ident":ch=stream.next();if(":"==ch)return readSymbol(stream),stack.key||(stack.key=stream.current()),"atom-ident";if('"'==ch)return pushStack(state,{mode:"string",indent:nextIndent(stream)}),"string";if(readNumber(ch,stream))return"number";if("]"==ch){popStack(state);if("join"==stack.prev.mode||
"param-exp"==stack.prev.mode)stack.prev.key=stack;return"bracket"}readSymbol(stream);return"constiable";case "param-exp":ch=stream.next();if(!stack.key){if(":"==ch)return readSymbol(stream),stack.key=stream.current(),atomOrComp(stream,state);if("["==ch)return readIdent(stream,state);if("{"==ch)return readJoin(stream,state);if(")"!=ch)return readSymbol(stream),stack.key=stream.current(),"constiable"}else if("{"==ch)return pushStack(state,{mode:"param-map",indent:nextIndent(stream)}),"bracket";if(")"==
ch)return popStack(state),"join"==stack.prev.mode&&(stack.prev.key=stack.key),"bracket";break;case "param-map":ch=stream.next();if(":"==ch)return readSymbol(stream),"atom";if('"'==ch)return pushStack(state,{mode:"string",indent:nextIndent(stream)}),"string";if(readNumber(ch,stream))return"number";if("}"==ch)return popStack(state),"bracket";readSymbol(stream);return"constiable";default:if(ch=stream.next(),"["==ch)return pushStack(state,{mode:"attr-list",indent:nextIndent(stream)}),"bracket"}stream.eatWhile(tests.symbol);
return"error"},indent:function(state){return null==state.pathStack?state.indentation:state.pathStack.indent},closeBrackets:{pairs:'()[]{}""'},lineComment:";"}})})}
//# sourceMappingURL=module$com$wsscode$pathom$viz$pathom_mode.js.map
