{"version":3,"sources":["fulcro/client/impl/data_fetch.cljc"],"mappings":"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","names":["fulcro.client.impl.data-fetch/optional","pred","cljs.spec.alpha/or-spec-impl","cljs.core/nil?","cljs.spec.alpha/def-impl","cljs.core/keyword?","cljs.core/string?","cljs.core/vector?","cljs.core/symbol?","cljs.core/map?","cljs.core/any?","cljs.core/true?","cljs.core/false?","cljs.core/boolean?","cljs.spec.alpha/map-spec-impl","G__58337","cljs.core/contains?","cljs.core/fn?","cljs.spec.alpha.every_impl","G__58448","cljs.core/coll?","G__58450","G__58514","fulcro.client.impl.data-fetch/data-target","state","fulcro.client.impl.data-fetch/data-ident","fulcro.client.impl.data-fetch/data-query","fulcro.client.impl.data-fetch/data-field","fulcro.client.impl.data-fetch/data-uuid","fulcro.client.impl.data-fetch/data-marker","fulcro.client.impl.data-fetch/data-marker?","cljs.core/boolean","fulcro.client.impl.data-fetch/data-refresh","fulcro.client.impl.data-fetch/data-remote","fulcro.client.impl.data-fetch/data-query-key","ast","fulcro.client.primitives/query->ast","node","cljs.core/first","fulcro.client.impl.data-fetch/data-path","target","and__4120__auto__","cljs.core/not-empty","cljs.core/Keyword","cljs.core.conj","fulcro.util/ident?","fulcro.client.impl.data-fetch/data-params","fulcro.client.impl.data-fetch/full-query","items","cljs.core/vec","cljs.core.mapcat","item","type","params","cljs.core.merge","var_args","G__58551","fulcro.client.impl.data-fetch/set-ready!","js/Error","fulcro.client.impl.data_fetch.set_ready_BANG_","set-type","G__58559","fulcro.client.impl.data-fetch/set-loading!","fulcro.client.impl.data_fetch.set_loading_BANG_","rv","cljs.core/with-meta","G__58578","fulcro.client.impl.data-fetch/set-failed!","fulcro.client.impl.data_fetch.set_failed_BANG_","fulcro.client.impl.data-fetch/data-state?","cljs.core._EQ_","fulcro.client.impl.data-fetch/ready?","is-kind?","fulcro.client.impl.data-fetch/loading?","fulcro.client.impl.data-fetch/failed?","fulcro.client.impl.data-fetch/is-direct-table-load?","load-marker","cljs.core/not","fulcro.client.impl.data-fetch/marker-table","fulcro.client.impl.data-fetch/-place-load-marker","state-map","marker","marker-id","legacy-marker?","cljs.core.update_in","current-val","cljs.core.assoc","cljs.core/assoc-in","fulcro.client.impl.data-fetch/-place-load-markers","items-to-load","cljs.core.reduce","s","i","G__58651","cljs.core.update","cljs.core.fnil","cljs.core/conj","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl","cljs.spec.alpha/cat-impl","fulcro.client.impl.data-fetch/earliest-load-time","load-markers","cljs.core/min","fulcro.history/max-tx-time","cljs.core.map","fulcro.client.impl.data-fetch/mark-parallel-loading!","remote-name","reconciler","fulcro.client.primitives/app-state","queued-items","cljs.core/deref","cljs.core.get","is-eligible?","other-items-loading?","cljs.core/seq","cljs.core.filter","remaining-items","cljs.core.comp","loading?","history-atom","fulcro.client.primitives/get-history","ok","fulcro.client.impl.data-fetch/-loaded-callback","error","fulcro.client.impl.data-fetch/-error-callback","tx-time","cljs.core/empty?","cljs.core.swap_BANG_","iter__4523__auto__","s__58671","cljs.core/LazySeq","temp__5720__auto__","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","cljs.core/count","b__58673","cljs.core/chunk-buffer","i__58672","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__58670","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","fulcro.client.primitives/reconciler?","G__58683","fulcro.client.impl.data-fetch/dedupe-by","keys-fn","rf","keys-seen","cljs.core/volatile!","result","input","input-keys","cljs.core/set","clojure.set.intersection","clojure.set.union","coll","cljs.core.sequence","fulcro.client.impl.data_fetch.dedupe_by","fulcro.client.impl.data-fetch/split-items-ready-to-load","items-ready-to-load","map__58693","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","item-keys","abort-id-conflict?","items-going?","active-abort-id","abort-id","or__4131__auto__","cljs.core.not_EQ_","can-go-now?","p__58699","map__58702","current-keys","current-abort-id","items-to-load-now","acc","G__58709","clojure.set/union","cljs.core/reduced","items-to-defer","cljs.core.drop","fulcro.client.impl.data-fetch/mark-loading","remote","vec__58719","cljs.core.nth","all-items","items-for-other-remotes","cljs.core.concat","cljs.core.keep","fulcro.client.impl.data-fetch/valid-types","G__58734","fulcro.client.impl.data-fetch/make-data-state","fulcro.client.impl.data_fetch.make_data_state","cljs.core.ex_info","p__58743","map__58744","fulcro.client.impl.data-fetch/elide-ast-nodes","key","union-key","children","elision-predicate","union-elision?","fulcro.logging._log","e58751","e__48920__auto__","cljs.core.pr_str","c","p1__58740#","fulcro.client.impl.data-fetch/inject-query-params","p1__58755#","temp__5718__auto__","new-params","cljs.core/merge","p__58762","map__58764","fulcro.client.impl.data-fetch/ready-state","ident","field","without","query","post-mutation","post-mutation-params","fallback","parallel","refresh","env","initialize","old-ast","G__58786","query-field","fulcro.util/join?","fulcro.util/join-key","query'","fulcro.client.primitives/ast->query","cljs.core/random-uuid","G__58791","fulcro.client.primitives/get-current-time","p__58798","map__58800","fulcro.client.impl.data-fetch/mark-ready","config","marker?","load-request","G__58808","fulcro.client.impl.data-fetch/-set-global-loading!","state-atom","cljs.core/assoc","fulcro.client.impl.data-fetch/replacement-target?","t","fulcro.client.impl.data-targeting/replacement-target?","fulcro.client.impl.data-fetch/prepend-target?","fulcro.client.impl.data-targeting/prepend-target?","fulcro.client.impl.data-fetch/append-target?","fulcro.client.impl.data-targeting/append-target?","fulcro.client.impl.data-fetch/multiple-targets?","fulcro.client.impl.data-targeting/multiple-targets?","fulcro.client.impl.data-fetch/special-target?","fulcro.client.impl.data-targeting/special-target?","fulcro.client.impl.data-fetch/process-target","fulcro.client.impl.data-targeting/process-target","fulcro.client.impl.data-fetch/relocate-targeted-results!","default-target","explicit-target","relocate?","fulcro.client.impl.data-fetch/-remove-marker","app-state","path","data","cljs.core.get_in","cljs.core/keys","cljs.core/dissoc","fulcro.client.impl.data-fetch/callback-env","original-env","map__58849","G__58855","fulcro.client.impl.data-fetch/-tick!","r","fulcro.client.impl.protocols/tick!","response","base-merge","initial-state","item-tree","fulcro.util.deep_merge","loading-items","cljs.core.into","refresh-set","marked-response","fulcro.client.primitives/mark-missing","explicit-refresh","cljs.core.remove","ran-mutations","cljs.core.atom","remove-markers!","seq__58878","chunk__58879","count__58880","i__58881","c__4550__auto__","cljs.core/chunk-first","cljs.core/next","G__58891","G__58892","cljs.core/disj","to-refresh","run-post-mutations!","seq__58899","chunk__58900","count__58901","i__58902","mutation-symbol","cljs.core/reset!","map__58936","map__58944","cljs.core/meta","action","fulcro.client.mutations/mutate","cljs.core/into","fulcro.client.primitives.merge_BANG_","fulcro.client.primitives/force-root-render!","fulcro.client.util.force_render","ran-fallbacks","mark-errors","seq__58962","chunk__58963","count__58964","i__58965","G__58991","G__58996","run-fallbacks","seq__58999","chunk__59000","count__59001","i__59002","fallback-symbol","G__59008","G__59011","fulcro.client.impl.data-fetch/is-deferred-transaction?"],"sourcesContent":["(ns fulcro.client.impl.data-fetch\n  (:require [fulcro.client.primitives :as prim]\n            [fulcro.client.impl.data-targeting :as targeting]\n            [fulcro.util :as util]\n            [fulcro.client.util :refer [force-render]]\n            [clojure.walk :refer [prewalk]]\n            [clojure.set :as set]\n            [fulcro.logging :as log]\n            [fulcro.history :as hist]\n            [fulcro.client.mutations :as m]\n            [fulcro.client.impl.protocols :as p]\n            [clojure.spec.alpha :as s]))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; Implementation for public api\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(declare -loaded-callback -error-callback)\n\n(defn optional [pred] (s/or :nothing nil? :value pred))\n(s/def ::type keyword?)\n(s/def ::uuid string?)\n(s/def ::target (optional vector?))\n(s/def ::field (optional keyword?))\n(s/def ::post-mutation (optional symbol?))\n(s/def ::post-mutation-params (optional map?))\n(s/def ::refresh (optional vector?))\n(s/def ::marker (s/or :reference any? :legacy true? :nothing (s/or :nil nil? :false false?)))\n(s/def ::parallel (optional boolean?))\n(s/def ::fallback (optional symbol?))\n(s/def ::original-env map?)\n(s/def ::load-marker (s/keys :req [::type ::uuid ::prim/query ::original-env ::hist/tx-time]\n                       :opt [::target ::prim/remote ::prim/ident ::field ::post-mutation-params ::post-mutation\n                             ::refresh ::marker ::parallel ::fallback :fulcro.client.network/abort-id]))\n\n(s/def ::on-load fn?)\n(s/def ::on-error fn?)\n(s/def ::load-descriptors (s/coll-of ::load-marker))\n(s/def ::payload (s/keys :req [::prim/query ::on-load ::on-error ::hist/history-atom ::hist/tx-time] :opt [::load-descriptors]))\n(s/def ::network-error any?)\n(s/def ::network-result (s/keys :opt [::load-descriptors ::network-error]))\n\n(defn data-target\n  \"Return the ident (if any) of the component related to the query in the data state marker. An ident is required\n  to be present if the marker is targeting a field.\"\n  [state] (::target state))\n(defn data-ident\n  \"Return the ident (if any) of the component related to the query in the data state marker. An ident is required\n  to be present if the marker is targeting a field.\"\n  [state] (::prim/ident state))\n(defn data-query\n  \"Get the query that will be sent to the server as a result of the given data state marker\"\n  [state]\n  (if (data-ident state)\n    [{(data-ident state) (::prim/query state)}]\n    (::prim/query state)))\n(defn data-field\n  \"Get the target field (if any) from the data state marker\"\n  [state] (::field state))\n(defn data-uuid\n  \"Get the UUID of the data fetch\"\n  [state] (::uuid state))\n(defn data-marker\n  \"Returns the ID of the data marker, or nil/false if there isn't one. True means to use the old marker behavior of\n  replacing the data in app state with a marker (DEPRECATED)\"\n  [state] (::marker state))\n(defn data-marker?\n  \"Test if the user desires a copy of the state marker to appear in the app state at the data path of the target data.\"\n  [state] (boolean (::marker state)))\n(defn data-refresh\n  \"Get the list of query keywords that should be refreshed (re-rendered) when this load completes.\"\n  [state] (::refresh state))\n(defn data-remote\n  \"Get the remote that this marker is meant to talk to\"\n  [state] (::prim/remote state))\n(defn data-query-key\n  \"Get the 'primary' query key of the data fetch. This is defined as the first keyword of the overall query (which might\n  be a simple prop or join key for example)\"\n  [state]\n  (let [ast  (prim/query->ast (-> state ::prim/query))\n        node (-> ast :children first)]\n    (:key node)))\n\n(defn data-path\n  \"Get the app-state database path of the target of the load that the given data state marker is trying to load.\"\n  [state]\n  (let [target (data-target state)]\n    (cond\n      (and (nil? (data-field state)) (vector? target) (not-empty target)) target\n      (and (vector? (data-ident state)) (keyword? (data-field state))) (conj (data-ident state) (data-field state))\n      (util/ident? (data-query-key state)) (data-query-key state)\n      :otherwise [(data-query-key state)])))\n\n(defn data-params\n  \"Get the parameters that the user wants to add to the first join/keyword of the data fetch query.\"\n  [state] (::params state))\n\n(defn full-query\n  \"Composes together the queries of a sequence of data states into a single query.\"\n  [items] (vec (mapcat (fn [item] (data-query item)) items)))\n\n;; Setters\n(letfn [(set-type [state type params]\n          (merge state {::type   type\n                        ::params params}))]\n  (defn set-ready!\n    \"Returns a state (based on the input state) that is in the 'ready' to load state.\"\n    ([state] (set-ready! state nil))\n    ([state params] (set-type state :ready params)))\n  (defn set-loading!\n    \"Returns a marker (based on the input state) that is in the loading state (and ensures that it has a UUID)\"\n    ([state] (set-loading! state nil))\n    ([state params] (let [rv (set-type state :loading params)]\n                      (with-meta rv {:state rv}))))\n  (defn set-failed!\n    \"Returns a marker (based on the input state) that is in the error state\"\n    ([state] (set-failed! state nil))\n    ([state params]\n     (set-type state :failed params))))\n\n; Built-in mutation for adding a remote query to the network requests.\n(defn data-state?\n  \"Test if the given bit of state is a data fetch state-tracking marker\"\n  [state] (and (map? state) (contains? state ::type)))\n\n(letfn [(is-kind? [state type]\n          (if (data-state? state)\n            (= type (::type state))\n            false))]\n  (defn ready?\n    \"Test if the given item is a data state marker that is in the ready state\"\n    [state] (is-kind? state :ready))\n  (defn loading?\n    \"Test if the given item is a data state marker in the loading state\"\n    [state] (is-kind? state :loading))\n  (defn failed?\n    \"Test if the given item is a data state marker in the failed state\"\n    [state] (is-kind? state :failed)))\n\n(defn is-direct-table-load? [load-marker]\n  (and\n    (not (data-field load-marker))\n    (util/ident? (data-query-key load-marker))))\n\n(def marker-table\n  :ui.fulcro.client.data-fetch.load-markers/by-id)\n\n(defn -place-load-marker [state-map marker]\n  (let [marker-id      (data-marker marker)\n        legacy-marker? (true? marker-id)]\n    (if legacy-marker?\n      (update-in state-map (data-path marker)\n        (fn [current-val]\n          (if (is-direct-table-load? marker)\n            (when (map? current-val) (assoc current-val :ui/fetch-state marker))\n            {:ui/fetch-state marker})))\n      (assoc-in state-map [marker-table marker-id] marker))))\n\n(defn -place-load-markers\n  \"Place load markers in the app state at their data paths so that UI rendering can see them.\"\n  [state-map items-to-load]\n  (reduce (fn [s item]\n            (let [i (set-loading! item)]\n              (cond-> (update s :fulcro/loads-in-progress (fnil conj #{}) (data-uuid i))\n                (data-marker? i) (-place-load-marker i))))\n    state-map items-to-load))\n\n(s/fdef -place-load-markers\n  :args (s/cat :state map? :items ::load-descriptors)\n  :ret map?)\n\n(defn earliest-load-time\n  \"Given a sequence of load markers, returns the history tx-time of the earliest one. Returns hist/max-tx-time if there\n  are no markers or none have a time.\"\n  [load-markers]\n  (reduce min hist/max-tx-time (map ::hist/tx-time load-markers)))\n\n(defn mark-parallel-loading!\n  \"Marks all of the items in the ready-to-load state as loading, places the loading markers in the appropriate locations\n  in the app state, and return maps with the keys:\n\n  `query` : The full query to send to the server.\n  `on-load` : The function to call to merge a response. Detects missing data and sets failure markers for those.\n  `on-error` : The function to call to set network/server error(s) in place of loading markers.\n  `load-descriptors` : Args to pass back to on-load and on-error. These are separated\n    so that `rewrite-tempids-in-request-queue` can rewrite tempids for merge and\n    error callbacks\n\n  response-channel will have the response posted to it when the request is done.\n  .\"\n  [remote-name reconciler]\n  (let [state                (prim/app-state reconciler)\n        queued-items         (get @state :fulcro/ready-to-load)\n        is-eligible?         (fn [item] (and (::parallel item) (= remote-name (data-remote item))))\n        other-items-loading? (boolean (seq (get @state :fulcro/loads-in-progress)))\n        items-to-load        (filter is-eligible? queued-items)\n        remaining-items      (filter (comp not is-eligible?) queued-items)\n        loading?             (or (boolean (seq items-to-load)) other-items-loading?)\n        history-atom         (prim/get-history reconciler)\n        ok                   (-loaded-callback reconciler)\n        error                (-error-callback reconciler)\n        tx-time              (earliest-load-time items-to-load)]\n    (when-not (empty? items-to-load)\n      (swap! state (fn [s] (-> s\n                             (-place-load-markers items-to-load)\n                             (assoc :ui/loading-data loading? :fulcro/ready-to-load remaining-items))))\n      (for [item items-to-load]\n        {::prim/query        (full-query [item])\n         ::prim/remote       remote-name\n         ::hist/tx-time      tx-time\n         ::hist/history-atom history-atom\n         ::on-load           ok\n         ::on-error          error\n         ::load-descriptors  [item]}))))\n\n(s/fdef mark-parallel-loading!\n  :args (s/cat :remote keyword? :reconciler prim/reconciler?)\n  :ret ::load-descriptors)\n\n(defn dedupe-by\n  \"Returns a lazy sequence of the elements of coll with dupes removed.\n   An element is a duplicate IFF (keys-fn element) has key collision with any prior element\n   to come before it. E.g. (dedupe-by identity [[:a] [:b] [:a] [:a :c]]) => [[:a] [:b]]\n   Returns a stateful transducer when no collection is provided.\"\n  ([keys-fn]                                                ;; transducer fn\n   (fn [rf]\n     (let [keys-seen (volatile! #{})]\n       (fn\n         ([] (rf))\n         ([result] (rf result))\n         ([result input]\n          (let [input-keys (set (keys-fn input))]\n            ;; if no keys seen, include input in the reduction\n            (if (empty? (set/intersection @keys-seen input-keys))\n              (do (vswap! keys-seen set/union input-keys)\n                  (rf result input))\n              result)))))))\n  ([keys-fn coll] (sequence (dedupe-by keys-fn) coll)))\n\n(defn split-items-ready-to-load\n  \"This function is used to split accidental colliding queries into separate network\n  requests. The most general description of this issue is\n  from two unrelated `load` calls when black-box composing functions. The two\n  separate queries: One issues `[{:entitlements [:foo]}]`, and the other\n  asks for `[{:entitlements [:bar]}]`. Fulcro merges these into a single query\n  [{:entitlements [:foo]} {:entitlements [:bar]}]. However, the response to a query\n  is a map, and such a query would result in the backend parser being called twice (once per key in the subquery)\n  but one would stomp on the other.\n\n  The other potential collision is if a load includes an abort ID. In this case such a load should not be batched\n  with others because aborting it would take others down with it.\n\n  Thus, this function ensures such accidental collisions are not combined into a single network request.\n\n  This functions returns a list of the load items that can be batched (from the beginning, in order) and the\n  remainder of the items which must be deferred to another request.\"\n  [items-ready-to-load]\n  (let [item-keys          (fn [item]\n                             (->> (data-query item)\n                               prim/query->ast\n                               :children\n                               (map :dispatch-key)\n                               set))\n        abort-id-conflict? (fn [items-going? active-abort-id abort-id]\n                             (and items-going? (or abort-id active-abort-id) (not= active-abort-id abort-id)))\n        can-go-now?        (fn [{:keys [items current-keys current-abort-id]} item]\n                             (let [abort-id (:fulcro.client.network/abort-id item)]\n                               (and\n                                 (not (abort-id-conflict? (seq items) current-abort-id abort-id))\n                                 (empty? (set/intersection current-keys (item-keys item))))))\n        {items-to-load-now :items} (reduce\n                                     (fn [acc item]\n                                       (if (can-go-now? acc item)\n                                         (cond-> acc\n                                           (:fulcro.client.network/abort-id item) (assoc :current-abort-id (:fulcro.client.network/abort-id item))\n                                           :always (update :current-keys set/union (item-keys item))\n                                           :always (update :items conj item))\n                                         (reduced acc)))\n                                     {:current-keys #{} :current-abort-id nil :items []}\n                                     items-ready-to-load)\n        items-to-defer     (->> items-ready-to-load (drop (count items-to-load-now)) vec)]\n    [items-to-load-now items-to-defer]))\n\n(defn mark-loading\n  \"Marks all of the items in the ready-to-load state as loading, places the loading markers in the appropriate locations\n  in the app state, and returns a map with the keys:\n\n  `query` : The full query to send to the server.\n  `on-load` : The function to call to merge a response. Detects missing data and sets failure markers for those.\n  `on-error` : The function to call to set network/server error(s) in place of loading markers.\n  `load-descriptors` : Args to pass back to on-load and on-error. These are separated\n    so that `rewrite-tempids-in-request-queue` can rewrite tempids for merge and\n    error callbacks\n\n  response-channel will have the response posted to it when the request is done.\n  .\"\n  [remote reconciler]\n  (let [state                   (prim/app-state reconciler)\n        is-eligible?            (fn [item] (= remote (data-remote item)))\n        all-items               (get @state :fulcro/ready-to-load)\n        items-ready-to-load     (filter is-eligible? all-items)\n        items-for-other-remotes (filter (comp not is-eligible?) all-items)\n        other-items-loading?    (boolean (seq (get @state :fulcro/loads-in-progress)))\n        [items-to-load-now items-to-defer] (split-items-ready-to-load items-ready-to-load)\n        remaining-items         (concat items-for-other-remotes items-to-defer)\n        loading?                (or (boolean (seq items-to-load-now)) other-items-loading?)\n        ; CAUTION: We use the earliest time of all items, so that we don't accidentally clear history for something we have not even sent.\n        tx-time                 (earliest-load-time all-items)]\n    (when-not (empty? items-to-load-now)\n      (swap! state (fn [s]\n                     (-> s\n                       (-place-load-markers items-to-load-now)\n                       (assoc :ui/loading-data loading? :fulcro/ready-to-load remaining-items))))\n      {::prim/query                    (full-query items-to-load-now)\n       ::hist/history-atom             (prim/get-history reconciler)\n       ::prim/remote                   remote\n       ::hist/tx-time                  tx-time\n       ::on-load                       (-loaded-callback reconciler)\n       ::on-error                      (-error-callback reconciler)\n       :fulcro.client.network/abort-id (first (keep :fulcro.client.network/abort-id items-to-load-now))\n       ::load-descriptors              items-to-load-now})))\n\n(s/fdef mark-loading\n  :args (s/cat :remote keyword? :reconciler prim/reconciler?)\n  :ret ::payload)\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; Testing API, used to write tests against specific data states\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n;; not-present represented by nil\n;; ok represented by data\n(def valid-types #{:ready :loading :failed})\n\n(defn make-data-state\n  \"This is just a testing function -- using ready-state as public interface and call the\n  `set-{type}!` functions to change it as needed.\"\n  ([type]\n   (make-data-state type {}))\n\n  ([type params]\n   (if (get valid-types type)\n     {::type type ::params params}\n     (throw (ex-info (str \"INVALID DATA STATE TYPE: \" type) {})))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; Helpers -- not intended for public use\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(defn elide-ast-nodes\n  \"Remove items from a query (AST) that have a key that returns true for the elision-predicate\"\n  [{:keys [key union-key children] :as ast} elision-predicate]\n  (let [union-elision? (elision-predicate union-key)]\n    (when-not (or union-elision? (elision-predicate key))\n      (when (and union-elision? (<= (count children) 2))\n        (log/warn \"Unions are not designed to be used with fewer than two children. Check your calls to Fulcro\n        load functions where the :without set contains \" (pr-str union-key)))\n      (update ast :children (fn [c] (vec (keep #(elide-ast-nodes % elision-predicate) c)))))))\n\n(defn inject-query-params\n  \"Inject parameters into elements of the top-level query.\n\n  `params` is a map from keyword (on the query in the AST) to parameter maps. So, given the AST for this query:\n\n  ```\n  [:a :b :c]\n  ```\n\n  and a `params` of `{:a {:x 1} :c {:y 2}}` you'll get an AST representing:\n\n  ```\n  [(:a {:x 1}) :b (:c {:y 2})]\n  ```\n  \"\n  [ast params]\n  (update-in ast [:children] #(map (fn [c] (if-let [new-params (get params (:dispatch-key c))]\n                                             (update c :params merge new-params)\n                                             c)) %)))\n\n(defn ready-state\n  \"Generate a ready-to-load state with all of the necessary details to do\n  remoting and merging.\"\n  [{:keys [ident field params remote without query post-mutation post-mutation-params fallback parallel refresh marker\n           target env initialize abort-id]\n    :or   {remote :remote without #{} refresh [] marker true}}]\n  (assert (or field query) \"You must supply a query or a field/ident pair\")\n  (assert (or (not field) (and field (util/ident? ident))) \"Field requires ident\")\n  (let [old-ast     (prim/query->ast query)\n        ast         (cond-> old-ast\n                      (not-empty without) (elide-ast-nodes without)\n                      (and field params (not (contains? params field))) (inject-query-params {field params})\n                      params (inject-query-params params))\n        query-field (first query)\n        key         (if (util/join? query-field) (util/join-key query-field) query-field)\n        query'      (prim/ast->query ast)]\n    (assert (or (not field) (= field key)) \"Component fetch query does not match supplied field.\")\n    {::type                          :ready\n     ::uuid                          #?(:cljs (str (cljs.core/random-uuid))\n                                        :clj  (str (System/currentTimeMillis)))\n     ::target                        target\n     ::prim/remote                   remote\n     ::prim/ident                    ident                  ; only for component-targeted loads\n     ::field                         field                  ; for component-targeted load\n     ::prim/query                    query'                 ; query, relative to root of db OR component\n     ::post-mutation                 post-mutation\n     ::post-mutation-params          post-mutation-params\n     ::initialize                    initialize\n     ::refresh                       refresh\n     ::marker                        marker\n     ::parallel                      parallel\n     ::fallback                      fallback\n     ; stored on metadata so it doesn't interfere with serializability (this marker ends up in state)\n     ::original-env                  (with-meta {} env)\n     :fulcro.client.network/abort-id abort-id\n     ::hist/tx-time                  (if (some-> env :reconciler)\n                                       (prim/get-current-time (:reconciler env))\n                                       (do hist/max-tx-time))}))\n\n(defn mark-ready\n  \"Place a ready-to-load marker into the application state. This should be done from\n  a mutate function that is abstractly loading something. This is intended for internal use.\n\n  See the `load` and `load-field` functions in `fulcro.client.data-fetch` for the public API.\"\n  [{:keys [env] :as config}]\n  (let [state        (get env :state)\n        marker?      (not (identical? false (:marker config)))\n        load-request (ready-state (merge {:marker true :refresh [] :without #{} :env env} config))]\n    (swap! state (fn [s]\n                   (cond-> (update s :fulcro/ready-to-load (fnil conj []) load-request)\n                     marker? (-place-load-marker load-request))))))\n\n(defn -set-global-loading! [reconciler]\n  \"Sets the global :ui/loading-data to false if there are no loading fetch states in the entire app-state, otherwise sets to true.\"\n  (let [state-atom (prim/app-state reconciler)\n        loading?   (boolean (seq (get @state-atom :fulcro/loads-in-progress)))]\n    (swap! state-atom assoc :ui/loading-data loading?)))\n\n(defn replacement-target? [t] (targeting/replacement-target? t))\n(defn prepend-target? [t] (targeting/prepend-target? t))\n(defn append-target? [t] (targeting/append-target? t))\n(defn multiple-targets? [t] (targeting/multiple-targets? t))\n(defn special-target? [t] (targeting/special-target? t))\n\n(def process-target targeting/process-target)\n\n(defn relocate-targeted-results!\n  \"For items that are manually targeted, move them in app state from their result location to their target location.\"\n  [state-atom items]\n  (swap! state-atom\n    (fn [state-map]\n      (reduce (fn [state item]\n                (let [default-target  (data-query-key item)\n                      explicit-target (or (data-target item) [])\n                      relocate?       (and\n                                        (nil? (data-field item))\n                                        (not-empty explicit-target))]\n                  (if relocate?\n                    (process-target state default-target explicit-target)\n                    state))) state-map items))))\n\n(defn -remove-marker\n  \"Returns app-state without the load marker for the given item.\"\n  [app-state item]\n  (let [marker-id      (data-marker item)\n        legacy-marker? (true? marker-id)]\n    (if legacy-marker?\n      (let [path (data-path item)\n            data (get-in app-state path)]\n        (cond\n          (and (map? data) (= #{:ui/fetch-state} (set (keys data)))) (assoc-in app-state path nil) ; to-many (will become a vector)\n          (and (map? data) (contains? data :ui/fetch-state)) (update-in app-state path dissoc :ui/fetch-state)\n          :else (assoc-in app-state path nil)))\n      (update app-state marker-table dissoc marker-id))))\n\n(defn callback-env\n  \"Build a callback env for post mutations and fallbacks\"\n  [reconciler load-request original-env]\n  (let [state (prim/app-state reconciler)\n        {:keys [::target ::prim/remote ::prim/ident ::field ::prim/query ::post-mutation ::post-mutation-params ::refresh ::marker ::parallel ::fallback]} load-request]\n    (merge original-env\n      {:state state\n       :load-request\n              (cond-> {:target target :remote remote :marker marker :server-query query :parallel (boolean parallel)}\n                post-mutation (assoc :post-mutation post-mutation)\n                post-mutation-params (assoc :post-mutation-params post-mutation-params)\n                refresh (assoc :refresh refresh)\n                fallback (assoc :fallback fallback))})))\n\n(defn -tick! \"Ability to mock in tests\"\n  [r]\n  (p/tick! r))\n\n(defn -loaded-callback\n  \"Generates a callback that processes all of the post-processing steps once a remote ***load*** has completed. This includes:\n\n  - Marking the items that were queried for but not returned as 'missing' (see documentation on mark and sweep of db)\n  - Refreshing elements of the UI that were included in the data fetch :refresh option\n  - Removing loading markers related to the executed loads that were not overwritten by incoming data\n  - Merging the incoming data into the normalized database\n  - Running post-mutations for any fetches that completed\n  - Updating the global loading marker\n  - Triggering re-render for all data item refresh lists\n  - Removing the activity from history tracking\n  \"\n  [reconciler]\n  (fn [response items]\n    (let [query               (full-query items)\n          base-merge          (reduce (fn [initial-state item]\n                                        (if-let [item-tree (::initialize item)]\n                                          (merge initial-state item-tree)\n                                          initial-state)) {} items)\n          response            (util/deep-merge base-merge response)\n          loading-items       (into #{} (map set-loading! items))\n          refresh-set         (into #{:ui/loading-data :ui/fetch-state marker-table} (mapcat data-refresh items))\n          marked-response     (prim/mark-missing response query)\n          explicit-refresh    (into (vec refresh-set) (remove symbol?) (keys marked-response))\n          app-state           (prim/app-state reconciler)\n          ran-mutations       (atom false)\n          remove-markers!     (fn [] (doseq [item loading-items]\n                                       (swap! app-state (fn [s]\n                                                          (cond-> s\n                                                            :always (update :fulcro/loads-in-progress disj (data-uuid item))\n                                                            (data-marker? item) (-remove-marker item))))))\n          to-refresh          (atom (set explicit-refresh))\n          run-post-mutations! (fn [] (doseq [item loading-items]\n                                       (when-let [mutation-symbol (::post-mutation item)]\n                                         (reset! ran-mutations true)\n                                         (let [params       (or (::post-mutation-params item) {})\n                                               original-env (-> item ::original-env meta)\n                                               {:keys [action refresh]} (m/mutate (callback-env reconciler item original-env) mutation-symbol params)]\n                                           (when (seq refresh)\n                                             (swap! to-refresh into refresh))\n                                           (when action\n                                             (action))))))]\n      (remove-markers!)\n      (prim/merge! reconciler marked-response query)\n      (relocate-targeted-results! app-state loading-items)\n      (run-post-mutations!)\n      (-set-global-loading! reconciler)\n      (-tick! reconciler)\n      (if (contains? refresh-set :fulcro/force-root)\n        (prim/force-root-render! reconciler)\n        (force-render reconciler (vec @to-refresh))))))\n\n(defn -error-callback\n  \"Generates a callback that is used whenever a hard server error occurs (status code 400+ or network error).\n\n  The generated callback:\n\n  - Replaces affected loading markers with error markers (if :marker is true on the load item)\n  - Runs fallbacks associated with the loads\n  - Sets the global error marker (:fulcro/server-error)\n  - Refreshes UI (from root if there were fallbacks)\n  \"\n  [reconciler]\n  (fn [error items]\n    (let [loading-items (into #{} (map set-loading! items))\n          app-state     (prim/app-state reconciler)\n          ; TODO: currently forcing root refresh, so these are not needed. Perhaps that should be optimized?\n          ;refresh-set   (into #{:ui/loading-data :ui/fetch-state marker-table} (mapcat data-refresh items))\n          ;to-refresh    (vec refresh-set)\n          ran-fallbacks (atom false)\n          mark-errors   (fn []\n                          (swap! app-state assoc :fulcro/server-error error)\n                          (doseq [item loading-items]\n                            (swap! app-state (fn [s]\n                                               (cond-> s\n                                                 (and (data-marker? item) (data-marker item)) (update-in [marker-table (data-marker item)] set-failed! error)\n                                                 (and (data-marker? item) (identical? true (data-marker item))) (update-in (conj (data-path item) :ui/fetch-state) set-failed! error)\n                                                 :always (update :fulcro/loads-in-progress disj (data-uuid item)))))))\n          run-fallbacks (fn [] (doseq [item loading-items]\n                                 (when-let [fallback-symbol (::fallback item)]\n                                   (let [original-env (-> item ::original-env meta)\n                                         env          (callback-env reconciler item original-env)]\n                                     (reset! ran-fallbacks true)\n                                     (some->\n                                       (m/mutate env fallback-symbol {:error error})\n                                       :action\n                                       (apply []))))))]\n      (mark-errors)\n      (run-fallbacks)\n      (-set-global-loading! reconciler)\n      (-tick! reconciler)\n      (prim/force-root-render! reconciler))))\n\n(defn is-deferred-transaction?\n  \"Returns true if the outgoing query is just a placeholder indicator for a deferred transaction in the load queue.\"\n  [query]\n  (boolean (and query (vector? query) (= ::deferred-transaction (first query)))))\n"]}