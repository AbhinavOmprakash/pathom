{"version":3,"sources":["com/wsscode/pathom/book/async/js_promises.cljs"],"mappings":"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","names":["com.wsscode.pathom.connect/resolver","p__47517","map__47518","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","com.wsscode.pathom.book.async.js-promises/random-dog","env","c__38998__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__38999__auto__","switch__38924__auto__","state_47541","state_val_47542","statearr-47543","inst_47539","cljs.core.async.impl.ioc-helpers/return-chan","inst_47520","statearr-47544","cljs.core.async.impl.ioc-helpers/process-exception","_","cljs.core.async.impl.ioc-helpers/add-exception-frame","inst_47524","inst_47525","inst_47526","com.wsscode.common.async-cljs/promise->chan","statearr-47545","cljs.core.async.impl.ioc-helpers/take!","inst_47533","inst_47534","com.wsscode.common.async-cljs/consumer-pair","inst_47535","inst_47536","inst_47537","cljs.core/PersistentHashMap","statearr-47546","inst_47528","inst_47529","inst_47530","inst_47531","statearr-47547","state-machine__38925__auto__","ret-value__38926__auto__","result__38927__auto__","cljs.core/keyword-identical?","e47548","js/Object","ex__38928__auto__","statearr-47549","state__39000__auto__","statearr-47550","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","js/fetch","goog.object/get","com.wsscode.pathom.book.async.js-promises/parser","com.wsscode.pathom.core/parallel-parser","com.wsscode.pathom.core/map-reader","com.wsscode.pathom.connect/parallel-reader","com.wsscode.pathom.connect/open-ident-reader","com.wsscode.pathom.core/env-placeholder-reader","com.wsscode.pathom.connect.connect_plugin.cljs$core$IFn$_invoke$arity$1","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.core/trace-plugin"],"sourcesContent":["(ns com.wsscode.pathom.book.async.js-promises\n  (:require [com.wsscode.common.async-cljs :refer [go-catch <!p]]\n            [com.wsscode.pathom.connect :as pc]\n            [com.wsscode.pathom.core :as p]\n            [goog.object :as gobj]))\n\n(pc/defresolver random-dog [env {:keys []}]\n  {::pc/output [:dog.ceo/random-dog-url]}\n  (go-catch\n    {:dog.ceo/random-dog-url\n     (-> (js/fetch \"https://dog.ceo/api/breeds/image/random\") <!p\n         (.json) <!p\n         (gobj/get \"message\"))}))\n\n(def parser\n  (p/parallel-parser\n    {::p/env     {::p/reader               [p/map-reader\n                                            pc/parallel-reader\n                                            pc/open-ident-reader\n                                            p/env-placeholder-reader]\n                  ::p/placeholder-prefixes #{\">\"}}\n     ::p/plugins [(pc/connect-plugin {::pc/register [random-dog]})\n                  p/error-handler-plugin\n                  p/trace-plugin]}))\n"]}