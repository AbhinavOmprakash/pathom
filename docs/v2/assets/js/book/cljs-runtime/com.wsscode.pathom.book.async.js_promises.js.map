{"version":3,"sources":["com/wsscode/pathom/book/async/js_promises.cljs"],"mappings":"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","names":["com.wsscode.pathom.connect/resolver","G__65064","p__65070","map__65075","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","com.wsscode.pathom.book.async.js-promises/random-dog","env","c__48839__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__48840__auto__","switch__48139__auto__","state_65147","state_val_65152","statearr-65212","_","statearr-65230","cljs.core/cons","inst_65110","inst_65127","inst_65128","com.wsscode.common.async-cljs/promise->chan","statearr-65248","cljs.core.async.impl.ioc-helpers/take!","inst_65142","cljs.core.async.impl.ioc-helpers/return-chan","inst_65100","statearr-65283","statearr-65296","cljs.core/rest","ex65259","statearr-65306","statearr-65309","inst_65135","inst_65136","com.wsscode.common.async-cljs/consumer-pair","inst_65137","inst_65138","inst_65139","cljs.core/PersistentHashMap","statearr-65328","statearr-65330","inst_65130","inst_65131","inst_65132","inst_65133","statearr-65343","state-machine__48140__auto__","ret-value__48141__auto__","result__48142__auto__","cljs.core/keyword-identical?","ex__48143__auto__","e65346","statearr-65347","cljs.core/seq","statearr-65348","cljs.core/first","state__48841__auto__","statearr-65353","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","js/fetch","goog.object/get","com.wsscode.pathom.book.async.js-promises/parser","com.wsscode.pathom.core/parallel-parser","com.wsscode.pathom.core/map-reader","com.wsscode.pathom.connect/parallel-reader","com.wsscode.pathom.connect/open-ident-reader","com.wsscode.pathom.core/env-placeholder-reader","com.wsscode.pathom.connect.connect_plugin","com.wsscode.pathom.core/error-handler-plugin","com.wsscode.pathom.core/trace-plugin"],"sourcesContent":["(ns com.wsscode.pathom.book.async.js-promises\n  (:require [com.wsscode.common.async-cljs :refer [go-catch <!p]]\n            [com.wsscode.pathom.connect :as pc]\n            [com.wsscode.pathom.core :as p]\n            [goog.object :as gobj]))\n\n(pc/defresolver random-dog [env {:keys []}]\n  {::pc/output [:dog.ceo/random-dog-url]}\n  (go-catch\n    {:dog.ceo/random-dog-url\n     (-> (js/fetch \"https://dog.ceo/api/breeds/image/random\") <!p\n         (.json) <!p\n         (gobj/get \"message\"))}))\n\n(def parser\n  (p/parallel-parser\n    {::p/env     {::p/reader               [p/map-reader\n                                            pc/parallel-reader\n                                            pc/open-ident-reader\n                                            p/env-placeholder-reader]\n                  ::p/placeholder-prefixes #{\">\"}}\n     ::p/plugins [(pc/connect-plugin {::pc/register [random-dog]})\n                  p/error-handler-plugin\n                  p/trace-plugin]}))\n"]}